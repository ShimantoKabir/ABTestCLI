(()=>{"use strict";var e={253:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mBoxNames=t.step=t.mobileBreakPoint=t.gbRange=t.sliderMoveRange=t.selectors=void 0,t.selectors={shoppingPageContainer:"div#shopping-page-container",circles:"div.phone-selector>div.fa-circle",mostPlans:"section.most-plans",range:"div.range-component>input",mobilePlanButtons:"section.most-plans>div:nth-child(3)>div.slider-wrapper>div.slick-slider>div.slick-list>div.slick-track>button.combo-plan",nextArrow:"div.next-arrow>i",pervArrow:"div.prev-arrow>i",actionLink:"div.action-link",mobileActivePlan:"section.most-plans>div:nth-child(3)>div.slider-wrapper>div.slick-slider>div.slick-list>div.slick-track>button.slick-active",gbButtons:"div.gb-component>div.gb-cart>button",mobileSlickList:function(e){return"section.most-plans>div:nth-child(".concat(e,")>div.slider-wrapper>div.slick-slider>div.slick-list")}},t.sliderMoveRange=[1,34,67,100],t.gbRange=["1GB","5GB","10GB","UNLTD"],t.mobileBreakPoint=720,t.step=33,t.mBoxNames={lineClick:"line-click",slideMove:"slide-move",pageVisit:"page-visit"}},531:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TestInfo=void 0,(n=t.TestInfo||(t.TestInfo={})).ID="CC011",n.SITE="consumercellular",n.TITLE="6.9M - Pricing is scroll off screen",n.CLIENT="brainlab",n.TARGET="https://www.consumercellular.com/shopping/choose/plan",n.VARIATION="2"},969:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GbComponent=void 0;var i=n(253),o=n(518);t.GbComponent=function(e){var t=this;this.getGbCart=function(e,t){return'\n      <div class="gb-cart" >\n        <button \n          id="'.concat(i.sliderMoveRange[t],'" \n          class="').concat(0===t?"active":"",'" \n        >\n        ').concat(e,"\n        </button>\n      </div>\n    ").trim()},this.getHtml=function(){return'\n      <div class="gb-component" >\n      '.concat(i.gbRange.map((function(e,n){return t.getGbCart(e,n)})).join("\n"),"\n      </div>\n    ").trim()},this.render=function(){var e=document.querySelector(i.selectors.actionLink);e&&(e.insertAdjacentHTML("afterend",t.getHtml()),t.addListener())},this.addListener=function(){var e=document.querySelectorAll(i.selectors.gbButtons);e&&0!==e.length&&e.forEach((function(n){n.addEventListener("click",(function(){var o=n.getAttribute("id");if(o){var r=t.getActiveButtonData(e),c=Number(o),s=c-r;(s=Math.abs(s))===i.step&&setTimeout((function(){t.serviceComponent.evaluateMovement(c),t.removeActive(e),n.classList.add("active")}),250)}}))}))},this.getActiveButtonData=function(e){var t=0;return e.forEach((function(e){var n=e.getAttribute("id");e.classList.contains("active")&&n&&(t=Number(n))})),t},this.removeActive=function(e){e.forEach((function(e){e.classList.remove("active")}))},this.activeNth=function(e){var n=document.querySelectorAll(i.selectors.gbButtons);n&&0!==n.length&&(t.removeActive(n),n[i.sliderMoveRange.findIndex((function(t){return t===e}))].classList.add("active"),t.serviceComponent.setPerviousRangeValue(e))},this.planService=e,this.serviceComponent=new o.ServiceComponent(this.planService)}},171:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MainComponent=void 0;var i=n(951),o=n(253),r=n(531),c=n(883),s=n(856),a=n(985),l=n(969),u=n(152),v=n(518);t.MainComponent=function(){var e=this;this.location="",this.planPagePathname="/shopping/choose/plan",this.isModificationApplied=!1,this.lastCircleIndex=3,this.planService=new a.PlanService,this.rangComponent=new u.RangeComponent(this.planService),this.variation=r.TestInfo.VARIATION.toString(),this.gbComponent=new l.GbComponent(this.planService),this.init=function(){c.LocationObserver.listen((function(t){e.location=t,e.isModificationApplied=!1,e.location===e.planPagePathname&&window.innerWidth<=o.mobileBreakPoint&&v.ServiceComponent.triggerMetrics(o.mBoxNames.pageVisit)})),new s.TestObserver("body").observe((function(t){for(var n=0;n<t.length;n++){var i=t[n].target;i.innerHTML&&i.innerHTML.length>2e5&&!e.isModificationApplied&&e.location===e.planPagePathname&&window.innerWidth<=o.mobileBreakPoint&&(e.displaySlider(),"1"===e.variation&&e.rangComponent.render(),"2"===e.variation&&e.gbComponent.render(),e.isModificationApplied=!0)}}))},this.displaySlider=function(){var t=!0,n=document.querySelectorAll(o.selectors.circles);if(n&&0!==n.length){for(var i=function(t){var i=n.item(t);return i.classList.contains("circle-selected")&&t!==e.lastCircleIndex?(n.item(t+1).click(),setTimeout((function(){i.click()}),250),"break"):(n.item(t-1).click(),setTimeout((function(){i.click()}),250),"break")},r=0;r<n.length&&"break"!==i(r);r++);n.forEach((function(n,i){3!==i&&n.addEventListener("click",(function(){v.ServiceComponent.triggerMetrics(o.mBoxNames.lineClick),!t&&"2"===e.variation&&e.gbComponent.activeNth(1),!t&&"1"===e.variation&&e.rangComponent.activeNth(1),setTimeout((function(){e.addSwipeListener()}),350)}))})),setTimeout((function(){t=!1,e.planService.getArrows()}),350)}},this.addSwipeListener=function(){e.planService.addSwipeListener((function(t){"1"===e.variation&&e.rangComponent.activeNth(t),"2"===e.variation&&e.gbComponent.activeNth(t)}))},i.Initializer.init(r.TestInfo,"0.0.1")}},152:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RangeComponent=void 0;var i=n(253),o=n(518);t.RangeComponent=function(e){var t=this;this.getHtml=function(){return'\n      <div class="range-component" ><input type="range" min="1" max="100" value="1" step="'.concat(i.step,'"></div>\n    ').trim()},this.render=function(){var e=document.querySelector(i.selectors.mostPlans);e&&(e.insertAdjacentHTML("afterend",t.getHtml()),t.makeInteractive())},this.makeInteractive=function(){var e=document.querySelector(i.selectors.range);e&&(e.oninput=function(){var n=Number(e.value);t.serviceComponent.evaluateMovement(n)})},this.activeNth=function(e){var n=document.querySelector(i.selectors.range);n&&(n.value=e.toString(),t.serviceComponent.setPerviousRangeValue(e))},this.planService=e,this.serviceComponent=new o.ServiceComponent(this.planService)}},518:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceComponent=void 0;var i=n(253),o=function(){function e(e){var t=this;this.prevRangeValue=1,this.isCtaClicked=!1,this.evaluateMovement=function(e){t.prevRangeValue===e?t.isCtaClicked=!0:t.isCtaClicked=!1,e>t.prevRangeValue?i.sliderMoveRange.find((function(t){return t===e}))&&!t.isCtaClicked&&t.planService.clickArrow("next"):i.sliderMoveRange.find((function(t){return t===e}))&&!t.isCtaClicked&&t.planService.clickArrow("prev"),t.prevRangeValue=e},this.setPerviousRangeValue=function(e){t.prevRangeValue=e},this.planService=e}return e.triggerMetrics=function(e){console.log("mbox=",e),adobe.target.trackEvent({mbox:e})},e}();t.ServiceComponent=o},883:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocationObserver=void 0;var i=n(856),o=function(){function e(){}var t;return t=e,e.previousPathname="",e.listen=function(e){new i.TestObserver("body").observe((function(n){location.pathname!==t.previousPathname&&(t.previousPathname=location.pathname,e(location.pathname))}))},e}();t.LocationObserver=o},856:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TestObserver=void 0;t.TestObserver=function(e){var t=this;this.targetNode=null,this.config={},this.observe=function(e){var n=new MutationObserver(e);return n.observe(t.targetNode,t.config),n},this.targetNode=document.querySelector(e),this.config={childList:!0,subtree:!0,characterData:!0}}},985:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PlanService=void 0;var i=n(253),o=n(531),r=n(518);t.PlanService=function(){var e=this;this.variation=o.TestInfo.VARIATION.toString(),this.sectionNumber="1"===this.variation||"control"===this.variation?3:4,this.getArrows=function(){var t=document.querySelector(i.selectors.nextArrow),n=document.querySelector(i.selectors.pervArrow);t&&n&&(t.addEventListener("click",(function(){"control"===e.variation&&r.ServiceComponent.triggerMetrics(i.mBoxNames.slideMove)})),n.addEventListener("click",(function(){"control"===e.variation&&r.ServiceComponent.triggerMetrics(i.mBoxNames.slideMove)})),e.nextArrow=t,e.prevArrow=n)},this.clickArrow=function(t){"next"===t&&e.nextArrow.click(),"prev"===t&&e.prevArrow.click(),r.ServiceComponent.triggerMetrics(i.mBoxNames.slideMove)},this.addSwipeListener=function(t){var n=document.querySelector(i.selectors.mobileSlickList(e.sectionNumber));n&&0!=n.childNodes.length||setTimeout((function(){e.addSwipeListener(t)}),25),n&&n.addEventListener("touchend",(function(){r.ServiceComponent.triggerMetrics(i.mBoxNames.slideMove),e.getSliderButtons((function(e){t(e)}))}))},this.getSliderButtons=function(t){var n=document.querySelectorAll(i.selectors.mobileSlickList(e.sectionNumber)+">div.slick-track>button");n&&0!==n.length&&n.forEach((function(e){if(e.classList.contains("slick-center")){var n=e.getAttribute("data-slick-index"),o=Number(n);if(o>=0&&4!==o){var r=i.sliderMoveRange[o];t(r)}}}))}}},951:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Initializer=void 0;var n=function(){function e(){}return e.init=function(e,t){document.documentElement.classList.add(e.ID),document.documentElement.classList.add("".concat(e.ID,"-").concat(e.VARIATION)),console.info("ID: ".concat(e.ID,", VARIATION: ").concat(e.VARIATION,", VERSION: ").concat(t," is running.....!"))},e}();t.Initializer=n},454:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Poller=void 0;var i=n(704);t.Poller=function(){var e=this;this.options=null,this.timeout=null,this.successfulConditions=[],this.callback=function(){},this.conditionsLength=0,this.poll=function(t,n,o){e.callback=n,e.options=new i.UserOptions,e.conditionsLength=t.length,o&&(e.options=o),e.timeout=e.options.timeout?new Date(e.getNow()+e.options.timeout).getTime():null;for(var r=0;r<t.length;r++)e.pollForCondition(t[r],e.options.wait,!0,e.options.multiplier)},this.getNow=function(){return(new Date).getTime()},this.isTimeOut=function(){return!!(e.timeout&&e.getNow()>e.timeout)},this.evaluateCondition=function(e){return!!e&&("function"==typeof e?e():!("string"!=typeof e||!document.querySelector(e)))},this.isAllConditionPassed=function(){return e.conditionsLength===e.successfulConditions.length},this.pollForCondition=function(t,n,i,o){if(e.timeout&&e.isTimeOut())return!1;var r=e.evaluateCondition(t);return r?(e.successfulConditions.push(r),e.isAllConditionPassed()&&e.callback(e.successfulConditions)):setTimeout((function(){e.pollForCondition(t,n*o,i,o)}),i?0:n),!0}}},704:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserOptions=void 0;t.UserOptions=function(){this.wait=50,this.multiplier=1.1,this.timeout=0}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}(()=>{var e=n(454),t=n(171);if(!/MSIE|Trident|Edge\/(12|13|14|15|16|17|18)/.test(window.navigator.userAgent)){var i=new t.MainComponent;(new e.Poller).poll(["body"],i.init)}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBT3NGLFVBQVVDLFdBR0osQ0FDYixJQUFNQyxFQUFPLElBQUksRUFBQXZHLGVBQ0YsSUFBSSxFQUFBb0UsUUFDWkssS0FBSyxDQUFDLFFBQVM4QixFQUFLM0YsSyIsInNvdXJjZXMiOlsid2VicGFjazovL2FiLXRlc3QtdHMtY2xpLy4vc3JjL2NsaWVudHMvYnJhaW5sYWIvY29uc3VtZXJjZWxsdWxhci9DQzAxMS9jb21tb24vYXNzZXQudHMiLCJ3ZWJwYWNrOi8vYWItdGVzdC10cy1jbGkvLi9zcmMvY2xpZW50cy9icmFpbmxhYi9jb25zdW1lcmNlbGx1bGFyL0NDMDExL2NvbW1vbi90ZXN0LmluZm8udHMiLCJ3ZWJwYWNrOi8vYWItdGVzdC10cy1jbGkvLi9zcmMvY2xpZW50cy9icmFpbmxhYi9jb25zdW1lcmNlbGx1bGFyL0NDMDExL2NvbXBvbmVudHMvZ2IuY29tcG9uZW50LnRzIiwid2VicGFjazovL2FiLXRlc3QtdHMtY2xpLy4vc3JjL2NsaWVudHMvYnJhaW5sYWIvY29uc3VtZXJjZWxsdWxhci9DQzAxMS9jb21wb25lbnRzL21haW4uY29tcG9uZW50LnRzIiwid2VicGFjazovL2FiLXRlc3QtdHMtY2xpLy4vc3JjL2NsaWVudHMvYnJhaW5sYWIvY29uc3VtZXJjZWxsdWxhci9DQzAxMS9jb21wb25lbnRzL3JhbmdlLmNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly9hYi10ZXN0LXRzLWNsaS8uL3NyYy9jbGllbnRzL2JyYWlubGFiL2NvbnN1bWVyY2VsbHVsYXIvQ0MwMTEvY29tcG9uZW50cy9zZXJ2aWNlLmNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly9hYi10ZXN0LXRzLWNsaS8uL3NyYy9jbGllbnRzL2JyYWlubGFiL2NvbnN1bWVyY2VsbHVsYXIvQ0MwMTEvb2JzZXJ2ZXIvbG9jYXRpb24ub2JzZXJ2ZXIudHMiLCJ3ZWJwYWNrOi8vYWItdGVzdC10cy1jbGkvLi9zcmMvY2xpZW50cy9icmFpbmxhYi9jb25zdW1lcmNlbGx1bGFyL0NDMDExL29ic2VydmVyL3Rlc3Qub2JzZXJ2ZXIudHMiLCJ3ZWJwYWNrOi8vYWItdGVzdC10cy1jbGkvLi9zcmMvY2xpZW50cy9icmFpbmxhYi9jb25zdW1lcmNlbGx1bGFyL0NDMDExL3NlcnZpY2VzL3BsYW4uc2VydmljZS50cyIsIndlYnBhY2s6Ly9hYi10ZXN0LXRzLWNsaS8uL3NyYy91dGlsaXRpZXMvaW5pdGlhbGl6ZXIudHMiLCJ3ZWJwYWNrOi8vYWItdGVzdC10cy1jbGkvLi9zcmMvdXRpbGl0aWVzL3BvbGxlci50cyIsIndlYnBhY2s6Ly9hYi10ZXN0LXRzLWNsaS8uL3NyYy91dGlsaXRpZXMvdXNlci5vcHRpb25zLnRzIiwid2VicGFjazovL2FiLXRlc3QtdHMtY2xpL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2FiLXRlc3QtdHMtY2xpLy4vc3JjL2NsaWVudHMvYnJhaW5sYWIvY29uc3VtZXJjZWxsdWxhci9DQzAxMS9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gIHNob3BwaW5nUGFnZUNvbnRhaW5lcjogXCJkaXYjc2hvcHBpbmctcGFnZS1jb250YWluZXJcIixcclxuICBjaXJjbGVzOiBcImRpdi5waG9uZS1zZWxlY3Rvcj5kaXYuZmEtY2lyY2xlXCIsXHJcbiAgbW9zdFBsYW5zOiBcInNlY3Rpb24ubW9zdC1wbGFuc1wiLFxyXG4gIHJhbmdlOiBcImRpdi5yYW5nZS1jb21wb25lbnQ+aW5wdXRcIixcclxuICBtb2JpbGVQbGFuQnV0dG9uczpcclxuICAgIFwic2VjdGlvbi5tb3N0LXBsYW5zPmRpdjpudGgtY2hpbGQoMyk+ZGl2LnNsaWRlci13cmFwcGVyPmRpdi5zbGljay1zbGlkZXI+ZGl2LnNsaWNrLWxpc3Q+ZGl2LnNsaWNrLXRyYWNrPmJ1dHRvbi5jb21iby1wbGFuXCIsXHJcbiAgbmV4dEFycm93OiBcImRpdi5uZXh0LWFycm93PmlcIixcclxuICBwZXJ2QXJyb3c6IFwiZGl2LnByZXYtYXJyb3c+aVwiLFxyXG4gIGFjdGlvbkxpbms6IFwiZGl2LmFjdGlvbi1saW5rXCIsXHJcbiAgbW9iaWxlQWN0aXZlUGxhbjpcclxuICAgIFwic2VjdGlvbi5tb3N0LXBsYW5zPmRpdjpudGgtY2hpbGQoMyk+ZGl2LnNsaWRlci13cmFwcGVyPmRpdi5zbGljay1zbGlkZXI+ZGl2LnNsaWNrLWxpc3Q+ZGl2LnNsaWNrLXRyYWNrPmJ1dHRvbi5zbGljay1hY3RpdmVcIixcclxuICBnYkJ1dHRvbnM6IFwiZGl2LmdiLWNvbXBvbmVudD5kaXYuZ2ItY2FydD5idXR0b25cIixcclxuICBtb2JpbGVTbGlja0xpc3Q6IChudGg6IG51bWJlcikgPT5cclxuICAgIGBzZWN0aW9uLm1vc3QtcGxhbnM+ZGl2Om50aC1jaGlsZCgke250aH0pPmRpdi5zbGlkZXItd3JhcHBlcj5kaXYuc2xpY2stc2xpZGVyPmRpdi5zbGljay1saXN0YCxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzbGlkZXJNb3ZlUmFuZ2U6IG51bWJlcltdID0gWzEsIDM0LCA2NywgMTAwXTtcclxuZXhwb3J0IGNvbnN0IGdiUmFuZ2U6IHN0cmluZ1tdID0gW1wiMUdCXCIsIFwiNUdCXCIsIFwiMTBHQlwiLCBcIlVOTFREXCJdO1xyXG5leHBvcnQgY29uc3QgbW9iaWxlQnJlYWtQb2ludDogbnVtYmVyID0gNzIwO1xyXG5leHBvcnQgY29uc3Qgc3RlcDogbnVtYmVyID0gMzM7XHJcblxyXG5leHBvcnQgY29uc3QgbUJveE5hbWVzID0ge1xyXG4gIGxpbmVDbGljazogXCJsaW5lLWNsaWNrXCIsXHJcbiAgc2xpZGVNb3ZlOiBcInNsaWRlLW1vdmVcIixcclxuICBwYWdlVmlzaXQ6IFwicGFnZS12aXNpdFwiLFxyXG59O1xyXG4iLCJleHBvcnQgZW51bSBUZXN0SW5mbyB7SUQgPSAnQ0MwMTEnLCBTSVRFID0gJ2NvbnN1bWVyY2VsbHVsYXInLCBUSVRMRSA9ICc2LjlNIC0gUHJpY2luZyBpcyBzY3JvbGwgb2ZmIHNjcmVlbicsIENMSUVOVCA9ICdicmFpbmxhYicsIFRBUkdFVCA9ICdodHRwczovL3d3dy5jb25zdW1lcmNlbGx1bGFyLmNvbS9zaG9wcGluZy9jaG9vc2UvcGxhbicsIFZBUklBVElPTiA9ICcyJ30iLCJpbXBvcnQgeyBnYlJhbmdlLCBzZWxlY3RvcnMsIHNsaWRlck1vdmVSYW5nZSwgc3RlcCB9IGZyb20gXCIuLi9jb21tb24vYXNzZXRcIjtcclxuaW1wb3J0IHsgUGxhblNlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZXMvcGxhbi5zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IFNlcnZpY2VDb21wb25lbnQgfSBmcm9tIFwiLi9zZXJ2aWNlLmNvbXBvbmVudFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdiQ29tcG9uZW50IHtcclxuICBwbGFuU2VydmljZSE6IFBsYW5TZXJ2aWNlO1xyXG4gIHNlcnZpY2VDb21wb25lbnQhOiBTZXJ2aWNlQ29tcG9uZW50O1xyXG5cclxuICBjb25zdHJ1Y3RvcihwbGFuU2VydmljZTogUGxhblNlcnZpY2UpIHtcclxuICAgIHRoaXMucGxhblNlcnZpY2UgPSBwbGFuU2VydmljZTtcclxuICAgIHRoaXMuc2VydmljZUNvbXBvbmVudCA9IG5ldyBTZXJ2aWNlQ29tcG9uZW50KHRoaXMucGxhblNlcnZpY2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0R2JDYXJ0ID0gKGdiOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgIGNvbnN0IGh0bWxTdHJpbmc6IHN0cmluZyA9IGBcclxuICAgICAgPGRpdiBjbGFzcz1cImdiLWNhcnRcIiA+XHJcbiAgICAgICAgPGJ1dHRvbiBcclxuICAgICAgICAgIGlkPVwiJHtzbGlkZXJNb3ZlUmFuZ2VbaW5kZXhdfVwiIFxyXG4gICAgICAgICAgY2xhc3M9XCIke2luZGV4ID09PSAwID8gXCJhY3RpdmVcIiA6IFwiXCJ9XCIgXHJcbiAgICAgICAgPlxyXG4gICAgICAgICR7Z2J9XHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuXHJcbiAgICByZXR1cm4gaHRtbFN0cmluZy50cmltKCk7XHJcbiAgfTtcclxuXHJcbiAgZ2V0SHRtbCA9ICgpOiBzdHJpbmcgPT4ge1xyXG4gICAgY29uc3QgaHRtbFN0cmluZzogc3RyaW5nID0gYFxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZ2ItY29tcG9uZW50XCIgPlxyXG4gICAgICAke2diUmFuZ2VcclxuICAgICAgICAubWFwKChnYjogc3RyaW5nLCBpbmRleDogbnVtYmVyKSA9PiB0aGlzLmdldEdiQ2FydChnYiwgaW5kZXgpKVxyXG4gICAgICAgIC5qb2luKFwiXFxuXCIpfVxyXG4gICAgICA8L2Rpdj5cclxuICAgIGA7XHJcblxyXG4gICAgcmV0dXJuIGh0bWxTdHJpbmcudHJpbSgpO1xyXG4gIH07XHJcblxyXG4gIHJlbmRlciA9ICgpID0+IHtcclxuICAgIGNvbnN0IGFjdGlvbkxpbms6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHNlbGVjdG9ycy5hY3Rpb25MaW5rXHJcbiAgICApO1xyXG5cclxuICAgIGlmICghYWN0aW9uTGluaykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgYWN0aW9uTGluay5pbnNlcnRBZGphY2VudEhUTUwoXCJhZnRlcmVuZFwiLCB0aGlzLmdldEh0bWwoKSk7XHJcblxyXG4gICAgdGhpcy5hZGRMaXN0ZW5lcigpO1xyXG4gIH07XHJcblxyXG4gIGFkZExpc3RlbmVyID0gKCkgPT4ge1xyXG4gICAgY29uc3QgYnV0dG9uczogbnVsbCB8IE5vZGVMaXN0T2Y8SFRNTEJ1dHRvbkVsZW1lbnQ+ID1cclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMuZ2JCdXR0b25zKTtcclxuXHJcbiAgICBpZiAoIWJ1dHRvbnMgfHwgYnV0dG9ucy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCkgPT4ge1xyXG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBjb25zdCByYW5nZTogbnVsbCB8IHN0cmluZyA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcclxuXHJcbiAgICAgICAgaWYgKCFyYW5nZSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYWN0aXZlUmFuZ2VWYWx1ZTogbnVtYmVyID0gdGhpcy5nZXRBY3RpdmVCdXR0b25EYXRhKGJ1dHRvbnMpO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRSYW5nZVZhbHVlOiBudW1iZXIgPSBOdW1iZXIocmFuZ2UpO1xyXG5cclxuICAgICAgICBsZXQgcmFuZ2VEaWZmZXJlbmNlOiBudW1iZXIgPSBjdXJyZW50UmFuZ2VWYWx1ZSAtIGFjdGl2ZVJhbmdlVmFsdWU7XHJcbiAgICAgICAgcmFuZ2VEaWZmZXJlbmNlID0gTWF0aC5hYnMocmFuZ2VEaWZmZXJlbmNlKTtcclxuXHJcbiAgICAgICAgaWYgKHJhbmdlRGlmZmVyZW5jZSA9PT0gc3RlcCkge1xyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUNvbXBvbmVudC5ldmFsdWF0ZU1vdmVtZW50KGN1cnJlbnRSYW5nZVZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVBY3RpdmUoYnV0dG9ucyk7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgfSwgMjUwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZ2V0QWN0aXZlQnV0dG9uRGF0YSA9IChidXR0b25zOiBOb2RlTGlzdE9mPEhUTUxCdXR0b25FbGVtZW50Pik6IG51bWJlciA9PiB7XHJcbiAgICBsZXQgYWN0aXZlUmFuZ2VWYWx1ZTogbnVtYmVyID0gMDtcclxuICAgIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCkgPT4ge1xyXG4gICAgICBjb25zdCByYW5nZTogbnVsbCB8IHN0cmluZyA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcclxuXHJcbiAgICAgIGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpICYmIHJhbmdlKSB7XHJcbiAgICAgICAgYWN0aXZlUmFuZ2VWYWx1ZSA9IE51bWJlcihyYW5nZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBhY3RpdmVSYW5nZVZhbHVlO1xyXG4gIH07XHJcblxyXG4gIHJlbW92ZUFjdGl2ZSA9IChidXR0b25zOiBOb2RlTGlzdE9mPEhUTUxCdXR0b25FbGVtZW50PikgPT4ge1xyXG4gICAgYnV0dG9ucy5mb3JFYWNoKChidXR0b246IEhUTUxCdXR0b25FbGVtZW50KSA9PiB7XHJcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgYWN0aXZlTnRoID0gKG50aDogbnVtYmVyKSA9PiB7XHJcbiAgICBjb25zdCBidXR0b25zOiBudWxsIHwgTm9kZUxpc3RPZjxIVE1MQnV0dG9uRWxlbWVudD4gPVxyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycy5nYkJ1dHRvbnMpO1xyXG5cclxuICAgIGlmICghYnV0dG9ucyB8fCBidXR0b25zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5yZW1vdmVBY3RpdmUoYnV0dG9ucyk7XHJcblxyXG4gICAgY29uc3QgaW5kZXg6IG51bWJlciA9IHNsaWRlck1vdmVSYW5nZS5maW5kSW5kZXgoXHJcbiAgICAgIChyYW5nZTogbnVtYmVyKSA9PiByYW5nZSA9PT0gbnRoXHJcbiAgICApO1xyXG5cclxuICAgIGJ1dHRvbnNbaW5kZXhdLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICB0aGlzLnNlcnZpY2VDb21wb25lbnQuc2V0UGVydmlvdXNSYW5nZVZhbHVlKG50aCk7XHJcbiAgfTtcclxufVxyXG4iLCJpbXBvcnQgeyBJbml0aWFsaXplciB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi91dGlsaXRpZXMvaW5pdGlhbGl6ZXJcIjtcclxuaW1wb3J0IHsgbUJveE5hbWVzLCBtb2JpbGVCcmVha1BvaW50LCBzZWxlY3RvcnMgfSBmcm9tIFwiLi4vY29tbW9uL2Fzc2V0XCI7XHJcbmltcG9ydCB7IFRlc3RJbmZvIH0gZnJvbSBcIi4uL2NvbW1vbi90ZXN0LmluZm9cIjtcclxuaW1wb3J0IHsgTG9jYXRpb25PYnNlcnZlciB9IGZyb20gXCIuLi9vYnNlcnZlci9sb2NhdGlvbi5vYnNlcnZlclwiO1xyXG5pbXBvcnQgeyBUZXN0T2JzZXJ2ZXIgfSBmcm9tIFwiLi4vb2JzZXJ2ZXIvdGVzdC5vYnNlcnZlclwiO1xyXG5pbXBvcnQgeyBQbGFuU2VydmljZSB9IGZyb20gXCIuLi9zZXJ2aWNlcy9wbGFuLnNlcnZpY2VcIjtcclxuaW1wb3J0IHsgR2JDb21wb25lbnQgfSBmcm9tIFwiLi9nYi5jb21wb25lbnRcIjtcclxuaW1wb3J0IHsgUmFuZ2VDb21wb25lbnQgfSBmcm9tIFwiLi9yYW5nZS5jb21wb25lbnRcIjtcclxuaW1wb3J0IHsgU2VydmljZUNvbXBvbmVudCB9IGZyb20gXCIuL3NlcnZpY2UuY29tcG9uZW50XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTWFpbkNvbXBvbmVudCB7XHJcbiAgbG9jYXRpb246IHN0cmluZyA9IFwiXCI7XHJcbiAgcGxhblBhZ2VQYXRobmFtZTogc3RyaW5nID0gXCIvc2hvcHBpbmcvY2hvb3NlL3BsYW5cIjtcclxuICBpc01vZGlmaWNhdGlvbkFwcGxpZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBsYXN0Q2lyY2xlSW5kZXg6IG51bWJlciA9IDM7XHJcbiAgcGxhblNlcnZpY2U6IFBsYW5TZXJ2aWNlID0gbmV3IFBsYW5TZXJ2aWNlKCk7XHJcbiAgcmFuZ0NvbXBvbmVudDogUmFuZ2VDb21wb25lbnQgPSBuZXcgUmFuZ2VDb21wb25lbnQodGhpcy5wbGFuU2VydmljZSk7XHJcbiAgdmFyaWF0aW9uOiBzdHJpbmcgPSBUZXN0SW5mby5WQVJJQVRJT04udG9TdHJpbmcoKTtcclxuICBnYkNvbXBvbmVudDogR2JDb21wb25lbnQgPSBuZXcgR2JDb21wb25lbnQodGhpcy5wbGFuU2VydmljZSk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgSW5pdGlhbGl6ZXIuaW5pdChUZXN0SW5mbywgXCIwLjAuMVwiKTtcclxuICB9XHJcblxyXG4gIGluaXQgPSAoKTogdm9pZCA9PiB7XHJcbiAgICBMb2NhdGlvbk9ic2VydmVyLmxpc3RlbigobG9jYXRpb246IHN0cmluZykgPT4ge1xyXG4gICAgICB0aGlzLmxvY2F0aW9uID0gbG9jYXRpb247XHJcbiAgICAgIHRoaXMuaXNNb2RpZmljYXRpb25BcHBsaWVkID0gZmFsc2U7XHJcbiAgICAgIGlmIChcclxuICAgICAgICB0aGlzLmxvY2F0aW9uID09PSB0aGlzLnBsYW5QYWdlUGF0aG5hbWUgJiZcclxuICAgICAgICB3aW5kb3cuaW5uZXJXaWR0aCA8PSBtb2JpbGVCcmVha1BvaW50XHJcbiAgICAgICkge1xyXG4gICAgICAgIFNlcnZpY2VDb21wb25lbnQudHJpZ2dlck1ldHJpY3MobUJveE5hbWVzLnBhZ2VWaXNpdCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHRlc3RPYnNlcnZlciA9IG5ldyBUZXN0T2JzZXJ2ZXIoXCJib2R5XCIpO1xyXG4gICAgY29uc3QgY2FsbGJhY2sgPSAobXV0YXRpb25MaXN0OiBNdXRhdGlvblJlY29yZFtdKSA9PiB7XHJcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBtdXRhdGlvbkxpc3QubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0OiBFbGVtZW50ID0gbXV0YXRpb25MaXN0W2luZGV4XS50YXJnZXQgYXMgRWxlbWVudDtcclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdGFyZ2V0LmlubmVySFRNTCAmJlxyXG4gICAgICAgICAgdGFyZ2V0LmlubmVySFRNTC5sZW5ndGggPiAyMDAwMDAgJiZcclxuICAgICAgICAgICF0aGlzLmlzTW9kaWZpY2F0aW9uQXBwbGllZCAmJlxyXG4gICAgICAgICAgdGhpcy5sb2NhdGlvbiA9PT0gdGhpcy5wbGFuUGFnZVBhdGhuYW1lICYmXHJcbiAgICAgICAgICB3aW5kb3cuaW5uZXJXaWR0aCA8PSBtb2JpbGVCcmVha1BvaW50XHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLmRpc3BsYXlTbGlkZXIoKTtcclxuICAgICAgICAgIHRoaXMudmFyaWF0aW9uID09PSBcIjFcIiAmJiB0aGlzLnJhbmdDb21wb25lbnQucmVuZGVyKCk7XHJcbiAgICAgICAgICB0aGlzLnZhcmlhdGlvbiA9PT0gXCIyXCIgJiYgdGhpcy5nYkNvbXBvbmVudC5yZW5kZXIoKTtcclxuXHJcbiAgICAgICAgICB0aGlzLmlzTW9kaWZpY2F0aW9uQXBwbGllZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGVzdE9ic2VydmVyLm9ic2VydmUoY2FsbGJhY2spO1xyXG4gIH07XHJcblxyXG4gIGRpc3BsYXlTbGlkZXIgPSAoKSA9PiB7XHJcbiAgICBsZXQgaXNGaXJzdDogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBjb25zdCBjaXJjbGVzOiBudWxsIHwgTm9kZUxpc3RPZjxIVE1MRGl2RWxlbWVudD4gPVxyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycy5jaXJjbGVzKTtcclxuXHJcbiAgICBpZiAoIWNpcmNsZXMgfHwgY2lyY2xlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjaXJjbGVzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICBjb25zdCBjaXJjbGU6IEhUTUxEaXZFbGVtZW50ID0gY2lyY2xlcy5pdGVtKGluZGV4KTtcclxuXHJcbiAgICAgIGlmIChcclxuICAgICAgICBjaXJjbGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2lyY2xlLXNlbGVjdGVkXCIpICYmXHJcbiAgICAgICAgaW5kZXggIT09IHRoaXMubGFzdENpcmNsZUluZGV4XHJcbiAgICAgICkge1xyXG4gICAgICAgIGNpcmNsZXMuaXRlbShpbmRleCArIDEpLmNsaWNrKCk7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICBjaXJjbGUuY2xpY2soKTtcclxuICAgICAgICB9LCAyNTApO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNpcmNsZXMuaXRlbShpbmRleCAtIDEpLmNsaWNrKCk7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICBjaXJjbGUuY2xpY2soKTtcclxuICAgICAgICB9LCAyNTApO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2lyY2xlcy5mb3JFYWNoKChjaXJjbGU6IEhUTUxEaXZFbGVtZW50LCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgIGluZGV4ICE9PSAzICYmXHJcbiAgICAgICAgY2lyY2xlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICBTZXJ2aWNlQ29tcG9uZW50LnRyaWdnZXJNZXRyaWNzKG1Cb3hOYW1lcy5saW5lQ2xpY2spO1xyXG4gICAgICAgICAgIWlzRmlyc3QgJiYgdGhpcy52YXJpYXRpb24gPT09IFwiMlwiICYmIHRoaXMuZ2JDb21wb25lbnQuYWN0aXZlTnRoKDEpO1xyXG4gICAgICAgICAgIWlzRmlyc3QgJiYgdGhpcy52YXJpYXRpb24gPT09IFwiMVwiICYmIHRoaXMucmFuZ0NvbXBvbmVudC5hY3RpdmVOdGgoMSk7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hZGRTd2lwZUxpc3RlbmVyKCk7XHJcbiAgICAgICAgICB9LCAzNTApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGlzRmlyc3QgPSBmYWxzZTtcclxuICAgICAgdGhpcy5wbGFuU2VydmljZS5nZXRBcnJvd3MoKTtcclxuICAgIH0sIDM1MCk7XHJcbiAgfTtcclxuXHJcbiAgYWRkU3dpcGVMaXN0ZW5lciA9ICgpID0+IHtcclxuICAgIHRoaXMucGxhblNlcnZpY2UuYWRkU3dpcGVMaXN0ZW5lcigocmFuZ2U6IG51bWJlcikgPT4ge1xyXG4gICAgICB0aGlzLnZhcmlhdGlvbiA9PT0gXCIxXCIgJiYgdGhpcy5yYW5nQ29tcG9uZW50LmFjdGl2ZU50aChyYW5nZSk7XHJcbiAgICAgIHRoaXMudmFyaWF0aW9uID09PSBcIjJcIiAmJiB0aGlzLmdiQ29tcG9uZW50LmFjdGl2ZU50aChyYW5nZSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG59XHJcbiIsImltcG9ydCB7IHNlbGVjdG9ycywgc3RlcCB9IGZyb20gXCIuLi9jb21tb24vYXNzZXRcIjtcclxuaW1wb3J0IHsgUGxhblNlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZXMvcGxhbi5zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IFNlcnZpY2VDb21wb25lbnQgfSBmcm9tIFwiLi9zZXJ2aWNlLmNvbXBvbmVudFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJhbmdlQ29tcG9uZW50IHtcclxuICBwcml2YXRlIHBsYW5TZXJ2aWNlITogUGxhblNlcnZpY2U7XHJcbiAgcHJpdmF0ZSBzZXJ2aWNlQ29tcG9uZW50ITogU2VydmljZUNvbXBvbmVudDtcclxuXHJcbiAgY29uc3RydWN0b3IocGxhblNlcnZpY2U6IFBsYW5TZXJ2aWNlKSB7XHJcbiAgICB0aGlzLnBsYW5TZXJ2aWNlID0gcGxhblNlcnZpY2U7XHJcbiAgICB0aGlzLnNlcnZpY2VDb21wb25lbnQgPSBuZXcgU2VydmljZUNvbXBvbmVudCh0aGlzLnBsYW5TZXJ2aWNlKTtcclxuICB9XHJcblxyXG4gIGdldEh0bWwgPSAoKTogc3RyaW5nID0+IHtcclxuICAgIGNvbnN0IGh0bWxTdHJpbmc6IHN0cmluZyA9IGBcclxuICAgICAgPGRpdiBjbGFzcz1cInJhbmdlLWNvbXBvbmVudFwiID48aW5wdXQgdHlwZT1cInJhbmdlXCIgbWluPVwiMVwiIG1heD1cIjEwMFwiIHZhbHVlPVwiMVwiIHN0ZXA9XCIke3N0ZXB9XCI+PC9kaXY+XHJcbiAgICBgO1xyXG4gICAgcmV0dXJuIGh0bWxTdHJpbmcudHJpbSgpO1xyXG4gIH07XHJcblxyXG4gIHJlbmRlciA9ICgpID0+IHtcclxuICAgIGNvbnN0IG1vc3RQbGFuczogbnVsbCB8IEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBzZWxlY3RvcnMubW9zdFBsYW5zXHJcbiAgICApO1xyXG4gICAgaWYgKCFtb3N0UGxhbnMpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIG1vc3RQbGFucy5pbnNlcnRBZGphY2VudEhUTUwoXCJhZnRlcmVuZFwiLCB0aGlzLmdldEh0bWwoKSk7XHJcbiAgICB0aGlzLm1ha2VJbnRlcmFjdGl2ZSgpO1xyXG4gIH07XHJcblxyXG4gIG1ha2VJbnRlcmFjdGl2ZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IHJhbmdlOiBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHNlbGVjdG9ycy5yYW5nZVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoIXJhbmdlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcHJldlJhbmdlVmFsdWU6IG51bWJlciA9IDA7XHJcblxyXG4gICAgcmFuZ2Uub25pbnB1dCA9ICgpID0+IHtcclxuICAgICAgY29uc3QgY3VycmVudFJhbmdlVmFsdWU6IG51bWJlciA9IE51bWJlcihyYW5nZS52YWx1ZSk7XHJcbiAgICAgIHRoaXMuc2VydmljZUNvbXBvbmVudC5ldmFsdWF0ZU1vdmVtZW50KGN1cnJlbnRSYW5nZVZhbHVlKTtcclxuICAgIH07XHJcbiAgfTtcclxuXHJcbiAgYWN0aXZlTnRoID0gKG50aDogbnVtYmVyKSA9PiB7XHJcbiAgICBjb25zdCByYW5nZTogSFRNTElucHV0RWxlbWVudCB8IG51bGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBzZWxlY3RvcnMucmFuZ2VcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCFyYW5nZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgcmFuZ2UudmFsdWUgPSBudGgudG9TdHJpbmcoKTtcclxuICAgIHRoaXMuc2VydmljZUNvbXBvbmVudC5zZXRQZXJ2aW91c1JhbmdlVmFsdWUobnRoKTtcclxuICB9O1xyXG59XHJcbiIsImltcG9ydCB7IHNsaWRlck1vdmVSYW5nZSB9IGZyb20gXCIuLi9jb21tb24vYXNzZXRcIjtcclxuaW1wb3J0IHsgUGxhblNlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZXMvcGxhbi5zZXJ2aWNlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2VydmljZUNvbXBvbmVudCB7XHJcbiAgcHJldlJhbmdlVmFsdWU6IG51bWJlciA9IDE7XHJcbiAgcGxhblNlcnZpY2UhOiBQbGFuU2VydmljZTtcclxuICBpc0N0YUNsaWNrZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgY29uc3RydWN0b3IocGxhblNlcnZpY2U6IFBsYW5TZXJ2aWNlKSB7XHJcbiAgICB0aGlzLnBsYW5TZXJ2aWNlID0gcGxhblNlcnZpY2U7XHJcbiAgfVxyXG5cclxuICBldmFsdWF0ZU1vdmVtZW50ID0gKGN1cnJlbnRSYW5nZVZhbHVlOiBudW1iZXIpID0+IHtcclxuICAgIGlmICh0aGlzLnByZXZSYW5nZVZhbHVlID09PSBjdXJyZW50UmFuZ2VWYWx1ZSkge1xyXG4gICAgICB0aGlzLmlzQ3RhQ2xpY2tlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmlzQ3RhQ2xpY2tlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjdXJyZW50UmFuZ2VWYWx1ZSA+IHRoaXMucHJldlJhbmdlVmFsdWUpIHtcclxuICAgICAgY29uc3QgaXNSYW5nZUZvdW5kID0gc2xpZGVyTW92ZVJhbmdlLmZpbmQoXHJcbiAgICAgICAgKHJhbmdlOiBudW1iZXIpID0+IHJhbmdlID09PSBjdXJyZW50UmFuZ2VWYWx1ZVxyXG4gICAgICApO1xyXG5cclxuICAgICAgaXNSYW5nZUZvdW5kICYmICF0aGlzLmlzQ3RhQ2xpY2tlZCAmJiB0aGlzLnBsYW5TZXJ2aWNlLmNsaWNrQXJyb3coXCJuZXh0XCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgaXNSYW5nZUZvdW5kID0gc2xpZGVyTW92ZVJhbmdlLmZpbmQoXHJcbiAgICAgICAgKHJhbmdlOiBudW1iZXIpID0+IHJhbmdlID09PSBjdXJyZW50UmFuZ2VWYWx1ZVxyXG4gICAgICApO1xyXG5cclxuICAgICAgaXNSYW5nZUZvdW5kICYmICF0aGlzLmlzQ3RhQ2xpY2tlZCAmJiB0aGlzLnBsYW5TZXJ2aWNlLmNsaWNrQXJyb3coXCJwcmV2XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucHJldlJhbmdlVmFsdWUgPSBjdXJyZW50UmFuZ2VWYWx1ZTtcclxuICB9O1xyXG5cclxuICBzZXRQZXJ2aW91c1JhbmdlVmFsdWUgPSAodmFsdWU6IG51bWJlcikgPT4ge1xyXG4gICAgdGhpcy5wcmV2UmFuZ2VWYWx1ZSA9IHZhbHVlO1xyXG4gIH07XHJcblxyXG4gIHN0YXRpYyB0cmlnZ2VyTWV0cmljcyA9IChtYm94TmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhcIm1ib3g9XCIsIG1ib3hOYW1lKTtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGFkb2JlLnRhcmdldC50cmFja0V2ZW50KHsgbWJveDogbWJveE5hbWUgfSk7XHJcbiAgfTtcclxufVxyXG4iLCJpbXBvcnQgeyBUZXN0T2JzZXJ2ZXIgfSBmcm9tIFwiLi90ZXN0Lm9ic2VydmVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTG9jYXRpb25PYnNlcnZlciB7XHJcbiAgc3RhdGljIHByZXZpb3VzUGF0aG5hbWU6IHN0cmluZyA9IFwiXCI7XHJcblxyXG4gIHN0YXRpYyBsaXN0ZW4gPSAoY2FsbGJhY2s6IEZ1bmN0aW9uKSA9PiB7XHJcbiAgICBjb25zdCB0ZXN0T2JzZXJ2ZXIgPSBuZXcgVGVzdE9ic2VydmVyKFwiYm9keVwiKTtcclxuXHJcbiAgICBjb25zdCBtdXRhdGlvbkNhbGxiYWNrID0gKG11dGF0aW9uTGlzdDogTXV0YXRpb25SZWNvcmRbXSkgPT4ge1xyXG4gICAgICBpZiAobG9jYXRpb24ucGF0aG5hbWUgIT09IHRoaXMucHJldmlvdXNQYXRobmFtZSkge1xyXG4gICAgICAgIHRoaXMucHJldmlvdXNQYXRobmFtZSA9IGxvY2F0aW9uLnBhdGhuYW1lO1xyXG4gICAgICAgIGNhbGxiYWNrKGxvY2F0aW9uLnBhdGhuYW1lKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0ZXN0T2JzZXJ2ZXIub2JzZXJ2ZShtdXRhdGlvbkNhbGxiYWNrKTtcclxuICB9O1xyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBUZXN0T2JzZXJ2ZXIge1xyXG4gIHByaXZhdGUgdGFyZ2V0Tm9kZTogRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG4gIHByaXZhdGUgY29uZmlnID0ge307XHJcblxyXG4gIGNvbnN0cnVjdG9yKHRhcmdldE5vZGU6IHN0cmluZykge1xyXG4gICAgdGhpcy50YXJnZXROb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXROb2RlKTtcclxuICAgIHRoaXMuY29uZmlnID0ge1xyXG4gICAgICBjaGlsZExpc3Q6IHRydWUsXHJcbiAgICAgIHN1YnRyZWU6IHRydWUsXHJcbiAgICAgIGNoYXJhY3RlckRhdGE6IHRydWUsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgb2JzZXJ2ZSA9IChjYWxsQmFjazogTXV0YXRpb25DYWxsYmFjayk6IE11dGF0aW9uT2JzZXJ2ZXIgPT4ge1xyXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihjYWxsQmFjayk7XHJcbiAgICBvYnNlcnZlci5vYnNlcnZlKHRoaXMudGFyZ2V0Tm9kZSBhcyBFbGVtZW50LCB0aGlzLmNvbmZpZyk7XHJcbiAgICByZXR1cm4gb2JzZXJ2ZXI7XHJcbiAgfTtcclxufVxyXG4iLCJpbXBvcnQgeyBtQm94TmFtZXMsIHNlbGVjdG9ycywgc2xpZGVyTW92ZVJhbmdlIH0gZnJvbSBcIi4uL2NvbW1vbi9hc3NldFwiO1xyXG5pbXBvcnQgeyBUZXN0SW5mbyB9IGZyb20gXCIuLi9jb21tb24vdGVzdC5pbmZvXCI7XHJcbmltcG9ydCB7IFNlcnZpY2VDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9zZXJ2aWNlLmNvbXBvbmVudFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBsYW5TZXJ2aWNlIHtcclxuICBuZXh0QXJyb3chOiBIVE1MRGl2RWxlbWVudDtcclxuICBwcmV2QXJyb3chOiBIVE1MRGl2RWxlbWVudDtcclxuICByYW5nZSE6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgdmFyaWF0aW9uOiBzdHJpbmcgPSBUZXN0SW5mby5WQVJJQVRJT04udG9TdHJpbmcoKTtcclxuICBzZWN0aW9uTnVtYmVyOiBudW1iZXIgPVxyXG4gICAgdGhpcy52YXJpYXRpb24gPT09IFwiMVwiIHx8IHRoaXMudmFyaWF0aW9uID09PSBcImNvbnRyb2xcIiA/IDMgOiA0O1xyXG5cclxuICBnZXRBcnJvd3MgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBuZXh0QXJyb3c6IG51bGwgfCBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHNlbGVjdG9ycy5uZXh0QXJyb3dcclxuICAgICk7XHJcbiAgICBjb25zdCBwcmV2QXJyb3c6IG51bGwgfCBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHNlbGVjdG9ycy5wZXJ2QXJyb3dcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCFuZXh0QXJyb3cgfHwgIXByZXZBcnJvdykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbmV4dEFycm93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMudmFyaWF0aW9uID09PSBcImNvbnRyb2xcIiAmJlxyXG4gICAgICAgIFNlcnZpY2VDb21wb25lbnQudHJpZ2dlck1ldHJpY3MobUJveE5hbWVzLnNsaWRlTW92ZSk7XHJcbiAgICB9KTtcclxuICAgIHByZXZBcnJvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLnZhcmlhdGlvbiA9PT0gXCJjb250cm9sXCIgJiZcclxuICAgICAgICBTZXJ2aWNlQ29tcG9uZW50LnRyaWdnZXJNZXRyaWNzKG1Cb3hOYW1lcy5zbGlkZU1vdmUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5uZXh0QXJyb3cgPSBuZXh0QXJyb3c7XHJcbiAgICB0aGlzLnByZXZBcnJvdyA9IHByZXZBcnJvdztcclxuICB9O1xyXG5cclxuICBjbGlja0Fycm93ID0gKGFycm93VHlwZTogc3RyaW5nKSA9PiB7XHJcbiAgICBhcnJvd1R5cGUgPT09IFwibmV4dFwiICYmIHRoaXMubmV4dEFycm93LmNsaWNrKCk7XHJcbiAgICBhcnJvd1R5cGUgPT09IFwicHJldlwiICYmIHRoaXMucHJldkFycm93LmNsaWNrKCk7XHJcbiAgICBTZXJ2aWNlQ29tcG9uZW50LnRyaWdnZXJNZXRyaWNzKG1Cb3hOYW1lcy5zbGlkZU1vdmUpO1xyXG4gIH07XHJcblxyXG4gIGFkZFN3aXBlTGlzdGVuZXIgPSAoY2FsbGJhY2s6IEZ1bmN0aW9uKSA9PiB7XHJcbiAgICBjb25zdCBzbGlja0xpc3Q6IG51bGwgfCBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHNlbGVjdG9ycy5tb2JpbGVTbGlja0xpc3QodGhpcy5zZWN0aW9uTnVtYmVyKVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoIXNsaWNrTGlzdCB8fCBzbGlja0xpc3QuY2hpbGROb2Rlcy5sZW5ndGggPT0gMCkge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLmFkZFN3aXBlTGlzdGVuZXIoY2FsbGJhY2spO1xyXG4gICAgICB9LCAyNSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2xpY2tMaXN0ICYmXHJcbiAgICAgIHNsaWNrTGlzdC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgKCkgPT4ge1xyXG4gICAgICAgIFNlcnZpY2VDb21wb25lbnQudHJpZ2dlck1ldHJpY3MobUJveE5hbWVzLnNsaWRlTW92ZSk7XHJcbiAgICAgICAgdGhpcy5nZXRTbGlkZXJCdXR0b25zKChyYW5nZTogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICBjYWxsYmFjayhyYW5nZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGdldFNsaWRlckJ1dHRvbnMgPSAoY2FsbGJhY2s6IEZ1bmN0aW9uKSA9PiB7XHJcbiAgICBjb25zdCBidXR0b25zOiBudWxsIHwgTm9kZUxpc3RPZjxIVE1MQnV0dG9uRWxlbWVudD4gPVxyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gICAgICAgIHNlbGVjdG9ycy5tb2JpbGVTbGlja0xpc3QodGhpcy5zZWN0aW9uTnVtYmVyKSArXHJcbiAgICAgICAgICBcIj5kaXYuc2xpY2stdHJhY2s+YnV0dG9uXCJcclxuICAgICAgKTtcclxuXHJcbiAgICBpZiAoIWJ1dHRvbnMgfHwgYnV0dG9ucy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCkgPT4ge1xyXG4gICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcInNsaWNrLWNlbnRlclwiKSkge1xyXG4gICAgICAgIGNvbnN0IGluZGV4OiBzdHJpbmcgfCBudWxsID0gYnV0dG9uLmdldEF0dHJpYnV0ZShcImRhdGEtc2xpY2staW5kZXhcIik7XHJcbiAgICAgICAgY29uc3QgbnVtYmVySW5kZXg6IG51bWJlciA9IE51bWJlcihpbmRleCk7XHJcblxyXG4gICAgICAgIGlmIChudW1iZXJJbmRleCA+PSAwICYmIG51bWJlckluZGV4ICE9PSA0KSB7XHJcbiAgICAgICAgICBjb25zdCBuZWVkVG9BY3RpdmVSYW5nZTogbnVtYmVyID0gc2xpZGVyTW92ZVJhbmdlW251bWJlckluZGV4XTtcclxuICAgICAgICAgIGNhbGxiYWNrKG5lZWRUb0FjdGl2ZVJhbmdlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEluaXRpYWxpemVyIHtcclxuICBzdGF0aWMgaW5pdCA9IChcclxuICAgIHRlc3RJbmZvOiB7XHJcbiAgICAgIElEOiBzdHJpbmc7XHJcbiAgICAgIFNJVEU6IHN0cmluZztcclxuICAgICAgQ0xJRU5UOiBzdHJpbmc7XHJcbiAgICAgIFZBUklBVElPTjogc3RyaW5nO1xyXG4gICAgfSxcclxuICAgIHZlcnNpb246IHN0cmluZ1xyXG4gICk6IHZvaWQgPT4ge1xyXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGVzdEluZm8uSUQpO1xyXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgIGAke3Rlc3RJbmZvLklEfS0ke3Rlc3RJbmZvLlZBUklBVElPTn1gXHJcbiAgICApO1xyXG4gICAgY29uc29sZS5pbmZvKFxyXG4gICAgICBgSUQ6ICR7dGVzdEluZm8uSUR9LCBWQVJJQVRJT046ICR7dGVzdEluZm8uVkFSSUFUSU9OfSwgVkVSU0lPTjogJHt2ZXJzaW9ufSBpcyBydW5uaW5nLi4uLi4hYFxyXG4gICAgKTtcclxuICB9O1xyXG59XHJcbiIsImltcG9ydCB7IFVzZXJPcHRpb25zIH0gZnJvbSBcIi4vdXNlci5vcHRpb25zXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9sbGVyIHtcclxuICBwcml2YXRlIG9wdGlvbnM6IFVzZXJPcHRpb25zIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSB0aW1lb3V0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIHN1Y2Nlc3NmdWxDb25kaXRpb25zOiBib29sZWFuW10gPSBbXTtcclxuICBwcml2YXRlIGNhbGxiYWNrOiBGdW5jdGlvbiA9ICgpID0+IHt9O1xyXG4gIHByaXZhdGUgY29uZGl0aW9uc0xlbmd0aDogbnVtYmVyID0gMDtcclxuXHJcbiAgcG9sbCA9IChcclxuICAgIGNvbmRpdGlvbnM6IChGdW5jdGlvbiB8IHN0cmluZylbXSxcclxuICAgIGNhbGxiYWNrOiBGdW5jdGlvbixcclxuICAgIHVzZXJPcHRpb25zPzogVXNlck9wdGlvbnNcclxuICApID0+IHtcclxuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgIHRoaXMub3B0aW9ucyA9IG5ldyBVc2VyT3B0aW9ucygpO1xyXG4gICAgdGhpcy5jb25kaXRpb25zTGVuZ3RoID0gY29uZGl0aW9ucy5sZW5ndGg7XHJcblxyXG4gICAgaWYgKHVzZXJPcHRpb25zKSB7XHJcbiAgICAgIHRoaXMub3B0aW9ucyA9IHVzZXJPcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudGltZW91dCA9IHRoaXMub3B0aW9ucy50aW1lb3V0XHJcbiAgICAgID8gbmV3IERhdGUodGhpcy5nZXROb3coKSArIHRoaXMub3B0aW9ucy50aW1lb3V0KS5nZXRUaW1lKClcclxuICAgICAgOiBudWxsO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uZGl0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICB0aGlzLnBvbGxGb3JDb25kaXRpb24oXHJcbiAgICAgICAgY29uZGl0aW9uc1tpXSxcclxuICAgICAgICB0aGlzLm9wdGlvbnMud2FpdCxcclxuICAgICAgICB0cnVlLFxyXG4gICAgICAgIHRoaXMub3B0aW9ucy5tdWx0aXBsaWVyXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgZ2V0Tm93ID0gKCk6IG51bWJlciA9PiB7XHJcbiAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgfTtcclxuXHJcbiAgaXNUaW1lT3V0ID0gKCk6IGJvb2xlYW4gPT4ge1xyXG4gICAgaWYgKHRoaXMudGltZW91dCAmJiB0aGlzLmdldE5vdygpID4gdGhpcy50aW1lb3V0KSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH07XHJcblxyXG4gIGV2YWx1YXRlQ29uZGl0aW9uID0gKGNvbmRpdGlvbjogRnVuY3Rpb24gfCBzdHJpbmcpOiBib29sZWFuID0+IHtcclxuICAgIGlmICghY29uZGl0aW9uKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIGNvbmRpdGlvbiA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgIHJldHVybiBjb25kaXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIGNvbmRpdGlvbiA9PT0gXCJzdHJpbmdcIiAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbmRpdGlvbikpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH07XHJcblxyXG4gIGlzQWxsQ29uZGl0aW9uUGFzc2VkID0gKCk6IGJvb2xlYW4gPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuY29uZGl0aW9uc0xlbmd0aCA9PT0gdGhpcy5zdWNjZXNzZnVsQ29uZGl0aW9ucy5sZW5ndGg7XHJcbiAgfTtcclxuXHJcbiAgcG9sbEZvckNvbmRpdGlvbiA9IChcclxuICAgIGNvbmRpdGlvbjogRnVuY3Rpb24gfCBzdHJpbmcsXHJcbiAgICB3YWl0VGltZTogbnVtYmVyLFxyXG4gICAgc2tpcFdhaXQ6IGJvb2xlYW4sXHJcbiAgICBtdWx0aXBsaWVyOiBudW1iZXJcclxuICApOiBib29sZWFuID0+IHtcclxuICAgIGlmICh0aGlzLnRpbWVvdXQgJiYgdGhpcy5pc1RpbWVPdXQoKSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5ldmFsdWF0ZUNvbmRpdGlvbihjb25kaXRpb24pO1xyXG5cclxuICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgdGhpcy5zdWNjZXNzZnVsQ29uZGl0aW9ucy5wdXNoKHJlc3VsdCk7XHJcblxyXG4gICAgICBpZiAodGhpcy5pc0FsbENvbmRpdGlvblBhc3NlZCgpKSB7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLnN1Y2Nlc3NmdWxDb25kaXRpb25zKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2V0VGltZW91dChcclxuICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBvbGxGb3JDb25kaXRpb24oXHJcbiAgICAgICAgICAgIGNvbmRpdGlvbixcclxuICAgICAgICAgICAgd2FpdFRpbWUgKiBtdWx0aXBsaWVyLFxyXG4gICAgICAgICAgICBza2lwV2FpdCxcclxuICAgICAgICAgICAgbXVsdGlwbGllclxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNraXBXYWl0ID8gMCA6IHdhaXRUaW1lXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfTtcclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVXNlck9wdGlvbnMge1xyXG4gIHdhaXQ6IG51bWJlciA9IDUwO1xyXG4gIG11bHRpcGxpZXI6IG51bWJlciA9IDEuMTtcclxuICB0aW1lb3V0OiBudW1iZXIgPSAwO1xyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJpbXBvcnQgeyBQb2xsZXIgfSBmcm9tIFwiLi4vLi4vLi4vLi4vdXRpbGl0aWVzL3BvbGxlclwiO1xyXG5pbXBvcnQgeyBNYWluQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9tYWluLmNvbXBvbmVudFwiO1xyXG5cclxuY29uc3QgaWVDaGVja3MgPSAvTVNJRXxUcmlkZW50fEVkZ2VcXC8oMTJ8MTN8MTR8MTV8MTZ8MTd8MTgpLy50ZXN0KFxyXG4gIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50XHJcbik7XHJcblxyXG5pZiAoIWllQ2hlY2tzKSB7XHJcbiAgY29uc3QgbWFpbiA9IG5ldyBNYWluQ29tcG9uZW50KCk7XHJcbiAgY29uc3QgcG9sbGVyID0gbmV3IFBvbGxlcigpO1xyXG4gIHBvbGxlci5wb2xsKFtcImJvZHlcIl0sIG1haW4uaW5pdCk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInNlbGVjdG9ycyIsInNob3BwaW5nUGFnZUNvbnRhaW5lciIsImNpcmNsZXMiLCJtb3N0UGxhbnMiLCJyYW5nZSIsIm1vYmlsZVBsYW5CdXR0b25zIiwibmV4dEFycm93IiwicGVydkFycm93IiwiYWN0aW9uTGluayIsIm1vYmlsZUFjdGl2ZVBsYW4iLCJnYkJ1dHRvbnMiLCJtb2JpbGVTbGlja0xpc3QiLCJudGgiLCJzbGlkZXJNb3ZlUmFuZ2UiLCJnYlJhbmdlIiwibW9iaWxlQnJlYWtQb2ludCIsInN0ZXAiLCJtQm94TmFtZXMiLCJsaW5lQ2xpY2siLCJzbGlkZU1vdmUiLCJwYWdlVmlzaXQiLCJUZXN0SW5mbyIsIkdiQ29tcG9uZW50IiwicGxhblNlcnZpY2UiLCJnZXRHYkNhcnQiLCJnYiIsImluZGV4IiwidHJpbSIsImdldEh0bWwiLCJtYXAiLCJqb2luIiwicmVuZGVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiYWRkTGlzdGVuZXIiLCJidXR0b25zIiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImZvckVhY2giLCJidXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiZ2V0QXR0cmlidXRlIiwiYWN0aXZlUmFuZ2VWYWx1ZSIsImdldEFjdGl2ZUJ1dHRvbkRhdGEiLCJjdXJyZW50UmFuZ2VWYWx1ZSIsIk51bWJlciIsInJhbmdlRGlmZmVyZW5jZSIsIk1hdGgiLCJhYnMiLCJzZXRUaW1lb3V0Iiwic2VydmljZUNvbXBvbmVudCIsImV2YWx1YXRlTW92ZW1lbnQiLCJyZW1vdmVBY3RpdmUiLCJjbGFzc0xpc3QiLCJhZGQiLCJjb250YWlucyIsInJlbW92ZSIsImFjdGl2ZU50aCIsImZpbmRJbmRleCIsInNldFBlcnZpb3VzUmFuZ2VWYWx1ZSIsInRoaXMiLCJTZXJ2aWNlQ29tcG9uZW50IiwiTWFpbkNvbXBvbmVudCIsImxvY2F0aW9uIiwicGxhblBhZ2VQYXRobmFtZSIsImlzTW9kaWZpY2F0aW9uQXBwbGllZCIsImxhc3RDaXJjbGVJbmRleCIsIlBsYW5TZXJ2aWNlIiwicmFuZ0NvbXBvbmVudCIsIlJhbmdlQ29tcG9uZW50IiwidmFyaWF0aW9uIiwiVkFSSUFUSU9OIiwidG9TdHJpbmciLCJnYkNvbXBvbmVudCIsImluaXQiLCJMb2NhdGlvbk9ic2VydmVyIiwibGlzdGVuIiwid2luZG93IiwiaW5uZXJXaWR0aCIsInRyaWdnZXJNZXRyaWNzIiwiVGVzdE9ic2VydmVyIiwib2JzZXJ2ZSIsIm11dGF0aW9uTGlzdCIsInRhcmdldCIsImlubmVySFRNTCIsImRpc3BsYXlTbGlkZXIiLCJpc0ZpcnN0IiwiY2lyY2xlIiwiaXRlbSIsImNsaWNrIiwiYWRkU3dpcGVMaXN0ZW5lciIsImdldEFycm93cyIsIkluaXRpYWxpemVyIiwibWFrZUludGVyYWN0aXZlIiwib25pbnB1dCIsInZhbHVlIiwicHJldlJhbmdlVmFsdWUiLCJpc0N0YUNsaWNrZWQiLCJmaW5kIiwiY2xpY2tBcnJvdyIsIm1ib3hOYW1lIiwiY29uc29sZSIsImxvZyIsImFkb2JlIiwidHJhY2tFdmVudCIsIm1ib3giLCJwcmV2aW91c1BhdGhuYW1lIiwiY2FsbGJhY2siLCJwYXRobmFtZSIsInRhcmdldE5vZGUiLCJjb25maWciLCJjYWxsQmFjayIsIm9ic2VydmVyIiwiTXV0YXRpb25PYnNlcnZlciIsImNoaWxkTGlzdCIsInN1YnRyZWUiLCJjaGFyYWN0ZXJEYXRhIiwic2VjdGlvbk51bWJlciIsInByZXZBcnJvdyIsImFycm93VHlwZSIsInNsaWNrTGlzdCIsImNoaWxkTm9kZXMiLCJnZXRTbGlkZXJCdXR0b25zIiwibnVtYmVySW5kZXgiLCJuZWVkVG9BY3RpdmVSYW5nZSIsInRlc3RJbmZvIiwidmVyc2lvbiIsImRvY3VtZW50RWxlbWVudCIsIklEIiwiaW5mbyIsIlBvbGxlciIsIm9wdGlvbnMiLCJ0aW1lb3V0Iiwic3VjY2Vzc2Z1bENvbmRpdGlvbnMiLCJjb25kaXRpb25zTGVuZ3RoIiwicG9sbCIsImNvbmRpdGlvbnMiLCJ1c2VyT3B0aW9ucyIsIlVzZXJPcHRpb25zIiwiRGF0ZSIsImdldE5vdyIsImdldFRpbWUiLCJpIiwicG9sbEZvckNvbmRpdGlvbiIsIndhaXQiLCJtdWx0aXBsaWVyIiwiaXNUaW1lT3V0IiwiZXZhbHVhdGVDb25kaXRpb24iLCJjb25kaXRpb24iLCJpc0FsbENvbmRpdGlvblBhc3NlZCIsIndhaXRUaW1lIiwic2tpcFdhaXQiLCJyZXN1bHQiLCJwdXNoIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwibWFpbiJdLCJzb3VyY2VSb290IjoiIn0=