(()=>{"use strict";var t={151:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.firstFromDisclaimerLink=e.hubSpotLibrary=e.formBgLink=e.selectors=void 0,e.selectors={freeOrderBtn:"div.hhs-rich-text>div.hhs-col-inner>p>span>a",firstFormDisclaimer:"div.first-form>div.hbspt-form>form>div.legal-consent-container>div.hs-richtext>p"},e.formBgLink="https://brainlabs.digital/cro/classicindustries/ci003/form-bg.jpg",e.hubSpotLibrary={js:"https://js.hsforms.net/forms/embed/v2.js"},e.firstFromDisclaimerLink="https://help.classicindustries.com/en/classic-industries-privacy-policy"},771:(t,e)=>{var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TestInfo=void 0,(n=e.TestInfo||(e.TestInfo={})).ID="CI003",n.SITE="classicindustries",n.TITLE="7.1_VLP_Catalog Download_PopUpForm",n.CLIENT="brainlab",n.TARGET="https://shop.classicindustries.com/lp/1958-1996_chevrolet_impala_and_full_size_chevrolet_parts",n.VARIATION="1"},366:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MainComponent=void 0;var o=n(951),i=n(151),r=n(771),s=n(918),c=n(501);e.MainComponent=function(){var t=this;this.overlayComponent=new c.OverlayComponent,this.init=function(){(new s.Loader).load(i.hubSpotLibrary.js,"hub-spot-js","script").then((function(e){console.log("Hubspot library loaded......!"),t.checkHubSpotObject()}))},this.checkHubSpotObject=function(){"object"==typeof hbspt?(console.log("Hubspot object initialize......!"),t.applyModification()):setTimeout((function(){t.checkHubSpotObject()}),500)},this.applyModification=function(){var e=document.querySelector(i.selectors.freeOrderBtn);t.overlayComponent.render();var n=document.querySelector("div.overlay-component");e&&n&&e.addEventListener("click",(function(t){t.preventDefault(),n.classList.add("show")}))},o.Initializer.init(r.TestInfo,"0.0.2")}},501:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayComponent=void 0;var o=n(151);e.OverlayComponent=function(){var t=this;this.getHtml=function(){return'\n      <div class="overlay-component" >\n        <div class="component-wrap" >\n          <div class="catalog" >\n            <div class="catalog-overlay" >\n              <div class="overlay-image" >\n                <img src="'.concat(o.formBgLink,'" >\n              </div>\n              <div class="overlay-body" >\n              </div>\n            </div>\n            <div class="main first-form" >\n              <div class="heading" >\n                <h6>FREE RESTORATION AND PERFORMANCE PARTS CATALOG</h6>\n              </div>\n            </div>\n            <div class="main second-form" >\n              <div class="heading" >\n                <h6>FREE RESTORATION AND PERFORMANCE PARTS CATALOG</h6>\n              </div>\n            </div>\n            <div class="main no-form show" >\n              <div class="heading" >\n                <h6>Purchase or Download your Impala & Full Size Chevy Parts Catalog</h6>\n              </div>\n              <div class="description" >\n                <table>\n                  <thead>\n                    <tr>\n                      <th>Description</th>\n                      <th>Price</th>\n                      <th>Qty</th>\n                      <th></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr>\n                      <td>Download the Catalog</td>\n                      <td>FREE</td>\n                      <td></td>\n                      <td><button class="first-download" >Download</button></td>\n                    </tr>\n                    <tr>\n                      <td>Delivery - U.S. 4th Class (contiguous 48 states only) Note: Catalog will arrive in approximately 2-4 weeks</td>\n                      <td>Free</td>\n                      <td><input type="text" ></td>\n                      <td><button class="second-download" >Download</button></td>\n                    </tr>\n                    <tr>\n                      <td>Delivery - U.S. 1st Class & HI, AK, PR, Guam</td>\n                      <td>$20.00</td>\n                      <td><input type="text" ></td>\n                      <td><button class="second-download" >Download</button></td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    ').trim()},this.loadFirstFormScript=function(){return'\n      <script defer>\n        hbspt.forms.create({\n          region: "na1",\n          portalId: "521369",\n          formId: "dcdaff52-9b18-4baa-b231-1865c29fe3a1"\n        });\n      <\/script>\n    '.trim()},this.loadSecondFormScript=function(){return'\n      <script defer>\n        hbspt.forms.create({\n          region: "na1",\n          portalId: "521369",\n          formId: "bcf2e44d-2295-44bd-b20c-534c52c47980"\n        });\n      <\/script>\n    '.trim()},this.render=function(){document.body.insertAdjacentHTML("afterbegin",t.getHtml()),setTimeout((function(){hbspt.forms.create({region:"na1",portalId:"521369",formId:"dcdaff52-9b18-4baa-b231-1865c29fe3a1"}),hbspt.forms.create({region:"na1",portalId:"521369",formId:"bcf2e44d-2295-44bd-b20c-534c52c47980"}),t.findForm()}),500)},this.findForm=function(){var e=document.querySelectorAll("div.hbspt-form"),n=document.querySelector("div.main.first-form"),o=document.querySelector("div.main.second-form");0===e[0].childElementCount?setTimeout((function(){t.findForm()}),500):(console.log("Found from...!"),e.forEach((function(t,e){if(t.firstChild&&"FORM"===t.firstChild.nodeName){var i=t.cloneNode(!0);n&&n.insertAdjacentElement("beforeend",i),t.remove(),console.log("First form moved....!")}else{var r=t.cloneNode(!0);o&&o.insertAdjacentElement("beforeend",r),console.log("Second form moved....!"),t.remove()}})),n&&o&&t.addListener(n,o))},this.changeFirstFormDisclaimer=function(){var e=document.querySelector(o.selectors.firstFormDisclaimer);e?(console.log("Disclaimer found...!"),e.textContent="",e.insertAdjacentHTML("afterbegin",'Classic Industries needs the contact information you provide to us to contact you about our products and services. You may unsubscribe from these communications at anytime. For information, check out our <a href="'.concat(o.firstFromDisclaimerLink,'" >Privacy Policy</a>.'))):setTimeout((function(){t.changeFirstFormDisclaimer()}),500)},this.addListener=function(e,n){var o=document.querySelectorAll("div.main"),i=document.querySelector("button.first-download"),r=document.querySelectorAll("button.second-download");i&&r&&0!==r.length&&o&&0!==o.length&&e&&n&&(i.addEventListener("click",(function(){t.hideOtherMain(o),e.classList.add("show")})),r.forEach((function(e){e.addEventListener("click",(function(){t.hideOtherMain(o),n.classList.add("show")}))})),t.changeFirstFormDisclaimer())},this.hideOtherMain=function(t){t.forEach((function(t){t.classList.remove("show")}))}}},918:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Loader=void 0;e.Loader=function(){this.load=function(t,e,n){var o=document.createElement(n);return"script"===n?o.setAttribute("src",t):o.setAttribute("href",t),"link"===n&&o.setAttribute("rel","stylesheet"),o.setAttribute("id",e),document.head.appendChild(o),new Promise((function(t,o){setTimeout((function(){var i=document.querySelector("".concat(n,"#")+e);i?t(i):o(null)}),1e3)}))}}},951:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Initializer=void 0;var n=function(){function t(){}return t.init=function(t,e){document.documentElement.classList.add(t.ID),document.documentElement.classList.add("".concat(t.ID,"-").concat(t.VARIATION)),console.info("ID: ".concat(t.ID,", VARIATION: ").concat(t.VARIATION,", VERSION: ").concat(e," is running.....!"))},t}();e.Initializer=n},454:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Poller=void 0;var o=n(704);e.Poller=function(){var t=this;this.options=null,this.timeout=null,this.successfulConditions=[],this.callback=function(){},this.conditionsLength=0,this.poll=function(e,n,i){t.callback=n,t.options=new o.UserOptions,t.conditionsLength=e.length,i&&(t.options=i),t.timeout=t.options.timeout?new Date(t.getNow()+t.options.timeout).getTime():null;for(var r=0;r<e.length;r++)t.pollForCondition(e[r],t.options.wait,!0,t.options.multiplier)},this.getNow=function(){return(new Date).getTime()},this.isTimeOut=function(){return!!(t.timeout&&t.getNow()>t.timeout)},this.evaluateCondition=function(t){return!!t&&("function"==typeof t?t():!("string"!=typeof t||!document.querySelector(t)))},this.isAllConditionPassed=function(){return t.conditionsLength===t.successfulConditions.length},this.pollForCondition=function(e,n,o,i){if(t.timeout&&t.isTimeOut())return!1;var r=t.evaluateCondition(e);return r?(t.successfulConditions.push(r),t.isAllConditionPassed()&&t.callback(t.successfulConditions)):setTimeout((function(){t.pollForCondition(e,n*i,o,i)}),o?0:n),!0}}},704:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UserOptions=void 0;e.UserOptions=function(){this.wait=50,this.multiplier=1.1,this.timeout=0}}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}(()=>{var t=n(454),e=n(151),o=n(366);if(!/MSIE|Trident|Edge\/(12|13|14|15|16|17|18)/.test(window.navigator.userAgent)){var i=new o.MainComponent;(new t.Poller).poll(["body",e.selectors.freeOrderBtn],i.init)}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPQyxVQUFVQyxXQUNsRSxDQUNYLElBQUl6RCxFQUFPLElBQUlxRCxFQUFpQjFILGVBQ25CLElBQUl5SCxFQUFTakMsUUFDbkJPLEtBQUssQ0FBQyxPQUFRN0YsRUFBUVAsVUFBVUMsY0FBZXlFLEVBQUszRCxLQUMvRCxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWItdGVzdC10cy1jbGkvLi9zcmMvY2xpZW50cy9icmFpbmxhYi9jbGFzc2ljaW5kdXN0cmllcy9DSTAwMy9jb21tb24vYXNzZXQudHMiLCJ3ZWJwYWNrOi8vYWItdGVzdC10cy1jbGkvLi9zcmMvY2xpZW50cy9icmFpbmxhYi9jbGFzc2ljaW5kdXN0cmllcy9DSTAwMy9jb21tb24vdGVzdC5pbmZvLnRzIiwid2VicGFjazovL2FiLXRlc3QtdHMtY2xpLy4vc3JjL2NsaWVudHMvYnJhaW5sYWIvY2xhc3NpY2luZHVzdHJpZXMvQ0kwMDMvY29tcG9uZW50cy9tYWluLmNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly9hYi10ZXN0LXRzLWNsaS8uL3NyYy9jbGllbnRzL2JyYWlubGFiL2NsYXNzaWNpbmR1c3RyaWVzL0NJMDAzL2NvbXBvbmVudHMvb3ZlcmxheS5jb21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vYWItdGVzdC10cy1jbGkvLi9zcmMvY2xpZW50cy9icmFpbmxhYi9jbGFzc2ljaW5kdXN0cmllcy9DSTAwMy9sb2FkZXJzL2xvYWRlci50cyIsIndlYnBhY2s6Ly9hYi10ZXN0LXRzLWNsaS8uL3NyYy91dGlsaXRpZXMvaW5pdGlhbGl6ZXIudHMiLCJ3ZWJwYWNrOi8vYWItdGVzdC10cy1jbGkvLi9zcmMvdXRpbGl0aWVzL3BvbGxlci50cyIsIndlYnBhY2s6Ly9hYi10ZXN0LXRzLWNsaS8uL3NyYy91dGlsaXRpZXMvdXNlci5vcHRpb25zLnRzIiwid2VicGFjazovL2FiLXRlc3QtdHMtY2xpL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2FiLXRlc3QtdHMtY2xpLy4vc3JjL2NsaWVudHMvYnJhaW5sYWIvY2xhc3NpY2luZHVzdHJpZXMvQ0kwMDMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5maXJzdEZyb21EaXNjbGFpbWVyTGluayA9IGV4cG9ydHMuaHViU3BvdExpYnJhcnkgPSBleHBvcnRzLmZvcm1CZ0xpbmsgPSBleHBvcnRzLnNlbGVjdG9ycyA9IHZvaWQgMDtcclxuZXhwb3J0cy5zZWxlY3RvcnMgPSB7XHJcbiAgICBmcmVlT3JkZXJCdG46IFwiZGl2Lmhocy1yaWNoLXRleHQ+ZGl2Lmhocy1jb2wtaW5uZXI+cD5zcGFuPmFcIixcclxuICAgIGZpcnN0Rm9ybURpc2NsYWltZXI6IFwiZGl2LmZpcnN0LWZvcm0+ZGl2Lmhic3B0LWZvcm0+Zm9ybT5kaXYubGVnYWwtY29uc2VudC1jb250YWluZXI+ZGl2LmhzLXJpY2h0ZXh0PnBcIixcclxufTtcclxuZXhwb3J0cy5mb3JtQmdMaW5rID0gXCJodHRwczovL2JyYWlubGFicy5kaWdpdGFsL2Nyby9jbGFzc2ljaW5kdXN0cmllcy9jaTAwMy9mb3JtLWJnLmpwZ1wiO1xyXG5leHBvcnRzLmh1YlNwb3RMaWJyYXJ5ID0ge1xyXG4gICAganM6IFwiaHR0cHM6Ly9qcy5oc2Zvcm1zLm5ldC9mb3Jtcy9lbWJlZC92Mi5qc1wiLFxyXG59O1xyXG5leHBvcnRzLmZpcnN0RnJvbURpc2NsYWltZXJMaW5rID0gXCJodHRwczovL2hlbHAuY2xhc3NpY2luZHVzdHJpZXMuY29tL2VuL2NsYXNzaWMtaW5kdXN0cmllcy1wcml2YWN5LXBvbGljeVwiO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlRlc3RJbmZvID0gdm9pZCAwO1xyXG52YXIgVGVzdEluZm87XHJcbihmdW5jdGlvbiAoVGVzdEluZm8pIHtcclxuICAgIFRlc3RJbmZvW1wiSURcIl0gPSBcIkNJMDAzXCI7XHJcbiAgICBUZXN0SW5mb1tcIlNJVEVcIl0gPSBcImNsYXNzaWNpbmR1c3RyaWVzXCI7XHJcbiAgICBUZXN0SW5mb1tcIlRJVExFXCJdID0gXCI3LjFfVkxQX0NhdGFsb2cgRG93bmxvYWRfUG9wVXBGb3JtXCI7XHJcbiAgICBUZXN0SW5mb1tcIkNMSUVOVFwiXSA9IFwiYnJhaW5sYWJcIjtcclxuICAgIFRlc3RJbmZvW1wiVEFSR0VUXCJdID0gXCJodHRwczovL3Nob3AuY2xhc3NpY2luZHVzdHJpZXMuY29tL2xwLzE5NTgtMTk5Nl9jaGV2cm9sZXRfaW1wYWxhX2FuZF9mdWxsX3NpemVfY2hldnJvbGV0X3BhcnRzXCI7XHJcbiAgICBUZXN0SW5mb1tcIlZBUklBVElPTlwiXSA9IFwiMVwiO1xyXG59KShUZXN0SW5mbyA9IGV4cG9ydHMuVGVzdEluZm8gfHwgKGV4cG9ydHMuVGVzdEluZm8gPSB7fSkpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLk1haW5Db21wb25lbnQgPSB2b2lkIDA7XHJcbnZhciBpbml0aWFsaXplcl8xID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uLy4uL3V0aWxpdGllcy9pbml0aWFsaXplclwiKTtcclxudmFyIGFzc2V0XzEgPSByZXF1aXJlKFwiLi4vY29tbW9uL2Fzc2V0XCIpO1xyXG52YXIgdGVzdF9pbmZvXzEgPSByZXF1aXJlKFwiLi4vY29tbW9uL3Rlc3QuaW5mb1wiKTtcclxudmFyIGxvYWRlcl8xID0gcmVxdWlyZShcIi4uL2xvYWRlcnMvbG9hZGVyXCIpO1xyXG52YXIgb3ZlcmxheV9jb21wb25lbnRfMSA9IHJlcXVpcmUoXCIuL292ZXJsYXkuY29tcG9uZW50XCIpO1xyXG52YXIgTWFpbkNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1haW5Db21wb25lbnQoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLm92ZXJsYXlDb21wb25lbnQgPSBuZXcgb3ZlcmxheV9jb21wb25lbnRfMS5PdmVybGF5Q29tcG9uZW50KCk7XHJcbiAgICAgICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIganNMb2FkZXIgPSBuZXcgbG9hZGVyXzEuTG9hZGVyKCk7XHJcbiAgICAgICAgICAgIGpzTG9hZGVyLmxvYWQoYXNzZXRfMS5odWJTcG90TGlicmFyeS5qcywgXCJodWItc3BvdC1qc1wiLCBcInNjcmlwdFwiKS50aGVuKGZ1bmN0aW9uIChqc0VsbSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJIdWJzcG90IGxpYnJhcnkgbG9hZGVkLi4uLi4uIVwiKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNoZWNrSHViU3BvdE9iamVjdCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuY2hlY2tIdWJTcG90T2JqZWN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaGJzcHQgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSHVic3BvdCBvYmplY3QgaW5pdGlhbGl6ZS4uLi4uLiFcIik7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5hcHBseU1vZGlmaWNhdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2hlY2tIdWJTcG90T2JqZWN0KCk7XHJcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmFwcGx5TW9kaWZpY2F0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZnJlZU9yZGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihhc3NldF8xLnNlbGVjdG9ycy5mcmVlT3JkZXJCdG4pO1xyXG4gICAgICAgICAgICBfdGhpcy5vdmVybGF5Q29tcG9uZW50LnJlbmRlcigpO1xyXG4gICAgICAgICAgICB2YXIgb3ZlcmxheUNvbXBvbmVudEVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXYub3ZlcmxheS1jb21wb25lbnRcIik7XHJcbiAgICAgICAgICAgIGlmICghZnJlZU9yZGVyQnRuIHx8ICFvdmVybGF5Q29tcG9uZW50RWxtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnJlZU9yZGVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgb3ZlcmxheUNvbXBvbmVudEVsbS5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpbml0aWFsaXplcl8xLkluaXRpYWxpemVyLmluaXQodGVzdF9pbmZvXzEuVGVzdEluZm8sIFwiMC4wLjJcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gTWFpbkNvbXBvbmVudDtcclxufSgpKTtcclxuZXhwb3J0cy5NYWluQ29tcG9uZW50ID0gTWFpbkNvbXBvbmVudDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5PdmVybGF5Q29tcG9uZW50ID0gdm9pZCAwO1xyXG52YXIgYXNzZXRfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24vYXNzZXRcIik7XHJcbnZhciBPdmVybGF5Q29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gT3ZlcmxheUNvbXBvbmVudCgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZ2V0SHRtbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGh0bWxTdHJpbmcgPSBcIlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcIm92ZXJsYXktY29tcG9uZW50XFxcIiA+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb21wb25lbnQtd3JhcFxcXCIgPlxcbiAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjYXRhbG9nXFxcIiA+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY2F0YWxvZy1vdmVybGF5XFxcIiA+XFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJvdmVybGF5LWltYWdlXFxcIiA+XFxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVxcXCJcIi5jb25jYXQoYXNzZXRfMS5mb3JtQmdMaW5rLCBcIlxcXCIgPlxcbiAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJvdmVybGF5LWJvZHlcXFwiID5cXG4gICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIm1haW4gZmlyc3QtZm9ybVxcXCIgPlxcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaGVhZGluZ1xcXCIgPlxcbiAgICAgICAgICAgICAgICA8aDY+RlJFRSBSRVNUT1JBVElPTiBBTkQgUEVSRk9STUFOQ0UgUEFSVFMgQ0FUQUxPRzwvaDY+XFxuICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJtYWluIHNlY29uZC1mb3JtXFxcIiA+XFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJoZWFkaW5nXFxcIiA+XFxuICAgICAgICAgICAgICAgIDxoNj5GUkVFIFJFU1RPUkFUSU9OIEFORCBQRVJGT1JNQU5DRSBQQVJUUyBDQVRBTE9HPC9oNj5cXG4gICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIm1haW4gbm8tZm9ybSBzaG93XFxcIiA+XFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJoZWFkaW5nXFxcIiA+XFxuICAgICAgICAgICAgICAgIDxoNj5QdXJjaGFzZSBvciBEb3dubG9hZCB5b3VyIEltcGFsYSAmIEZ1bGwgU2l6ZSBDaGV2eSBQYXJ0cyBDYXRhbG9nPC9oNj5cXG4gICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZGVzY3JpcHRpb25cXFwiID5cXG4gICAgICAgICAgICAgICAgPHRhYmxlPlxcbiAgICAgICAgICAgICAgICAgIDx0aGVhZD5cXG4gICAgICAgICAgICAgICAgICAgIDx0cj5cXG4gICAgICAgICAgICAgICAgICAgICAgPHRoPkRlc2NyaXB0aW9uPC90aD5cXG4gICAgICAgICAgICAgICAgICAgICAgPHRoPlByaWNlPC90aD5cXG4gICAgICAgICAgICAgICAgICAgICAgPHRoPlF0eTwvdGg+XFxuICAgICAgICAgICAgICAgICAgICAgIDx0aD48L3RoPlxcbiAgICAgICAgICAgICAgICAgICAgPC90cj5cXG4gICAgICAgICAgICAgICAgICA8L3RoZWFkPlxcbiAgICAgICAgICAgICAgICAgIDx0Ym9keT5cXG4gICAgICAgICAgICAgICAgICAgIDx0cj5cXG4gICAgICAgICAgICAgICAgICAgICAgPHRkPkRvd25sb2FkIHRoZSBDYXRhbG9nPC90ZD5cXG4gICAgICAgICAgICAgICAgICAgICAgPHRkPkZSRUU8L3RkPlxcbiAgICAgICAgICAgICAgICAgICAgICA8dGQ+PC90ZD5cXG4gICAgICAgICAgICAgICAgICAgICAgPHRkPjxidXR0b24gY2xhc3M9XFxcImZpcnN0LWRvd25sb2FkXFxcIiA+RG93bmxvYWQ8L2J1dHRvbj48L3RkPlxcbiAgICAgICAgICAgICAgICAgICAgPC90cj5cXG4gICAgICAgICAgICAgICAgICAgIDx0cj5cXG4gICAgICAgICAgICAgICAgICAgICAgPHRkPkRlbGl2ZXJ5IC0gVS5TLiA0dGggQ2xhc3MgKGNvbnRpZ3VvdXMgNDggc3RhdGVzIG9ubHkpIE5vdGU6IENhdGFsb2cgd2lsbCBhcnJpdmUgaW4gYXBwcm94aW1hdGVseSAyLTQgd2Vla3M8L3RkPlxcbiAgICAgICAgICAgICAgICAgICAgICA8dGQ+RnJlZTwvdGQ+XFxuICAgICAgICAgICAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT1cXFwidGV4dFxcXCIgPjwvdGQ+XFxuICAgICAgICAgICAgICAgICAgICAgIDx0ZD48YnV0dG9uIGNsYXNzPVxcXCJzZWNvbmQtZG93bmxvYWRcXFwiID5Eb3dubG9hZDwvYnV0dG9uPjwvdGQ+XFxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxcbiAgICAgICAgICAgICAgICAgICAgPHRyPlxcbiAgICAgICAgICAgICAgICAgICAgICA8dGQ+RGVsaXZlcnkgLSBVLlMuIDFzdCBDbGFzcyAmIEhJLCBBSywgUFIsIEd1YW08L3RkPlxcbiAgICAgICAgICAgICAgICAgICAgICA8dGQ+JDIwLjAwPC90ZD5cXG4gICAgICAgICAgICAgICAgICAgICAgPHRkPjxpbnB1dCB0eXBlPVxcXCJ0ZXh0XFxcIiA+PC90ZD5cXG4gICAgICAgICAgICAgICAgICAgICAgPHRkPjxidXR0b24gY2xhc3M9XFxcInNlY29uZC1kb3dubG9hZFxcXCIgPkRvd25sb2FkPC9idXR0b24+PC90ZD5cXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XFxuICAgICAgICAgICAgICAgICAgPC90Ym9keT5cXG4gICAgICAgICAgICAgICAgPC90YWJsZT5cXG4gICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgIDwvZGl2PlxcbiAgICBcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBodG1sU3RyaW5nLnRyaW0oKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMubG9hZEZpcnN0Rm9ybVNjcmlwdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHNjcmlwdFN0cmluZyA9IFwiXFxuICAgICAgPHNjcmlwdCBkZWZlcj5cXG4gICAgICAgIGhic3B0LmZvcm1zLmNyZWF0ZSh7XFxuICAgICAgICAgIHJlZ2lvbjogXFxcIm5hMVxcXCIsXFxuICAgICAgICAgIHBvcnRhbElkOiBcXFwiNTIxMzY5XFxcIixcXG4gICAgICAgICAgZm9ybUlkOiBcXFwiZGNkYWZmNTItOWIxOC00YmFhLWIyMzEtMTg2NWMyOWZlM2ExXFxcIlxcbiAgICAgICAgfSk7XFxuICAgICAgPC9zY3JpcHQ+XFxuICAgIFwiO1xyXG4gICAgICAgICAgICByZXR1cm4gc2NyaXB0U3RyaW5nLnRyaW0oKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMubG9hZFNlY29uZEZvcm1TY3JpcHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzY3JpcHRTdHJpbmcgPSBcIlxcbiAgICAgIDxzY3JpcHQgZGVmZXI+XFxuICAgICAgICBoYnNwdC5mb3Jtcy5jcmVhdGUoe1xcbiAgICAgICAgICByZWdpb246IFxcXCJuYTFcXFwiLFxcbiAgICAgICAgICBwb3J0YWxJZDogXFxcIjUyMTM2OVxcXCIsXFxuICAgICAgICAgIGZvcm1JZDogXFxcImJjZjJlNDRkLTIyOTUtNDRiZC1iMjBjLTUzNGM1MmM0Nzk4MFxcXCJcXG4gICAgICAgIH0pO1xcbiAgICAgIDwvc2NyaXB0PlxcbiAgICBcIjtcclxuICAgICAgICAgICAgcmV0dXJuIHNjcmlwdFN0cmluZy50cmltKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwoXCJhZnRlcmJlZ2luXCIsIF90aGlzLmdldEh0bWwoKSk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgaGJzcHQuZm9ybXMuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICByZWdpb246IFwibmExXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9ydGFsSWQ6IFwiNTIxMzY5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybUlkOiBcImRjZGFmZjUyLTliMTgtNGJhYS1iMjMxLTE4NjVjMjlmZTNhMVwiLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIGhic3B0LmZvcm1zLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiBcIm5hMVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvcnRhbElkOiBcIjUyMTM2OVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1JZDogXCJiY2YyZTQ0ZC0yMjk1LTQ0YmQtYjIwYy01MzRjNTJjNDc5ODBcIixcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZmluZEZvcm0oKTtcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZmluZEZvcm0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBodWJTcG90Rm9ybXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiZGl2Lmhic3B0LWZvcm1cIik7XHJcbiAgICAgICAgICAgIHZhciBmaXJzdEZyb20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2Lm1haW4uZmlyc3QtZm9ybVwiKTtcclxuICAgICAgICAgICAgdmFyIHNlY29uZEZyb20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2Lm1haW4uc2Vjb25kLWZvcm1cIik7XHJcbiAgICAgICAgICAgIGlmIChodWJTcG90Rm9ybXNbMF0uY2hpbGRFbGVtZW50Q291bnQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmZpbmRGb3JtKCk7XHJcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGb3VuZCBmcm9tLi4uIVwiKTtcclxuICAgICAgICAgICAgICAgIGh1YlNwb3RGb3Jtcy5mb3JFYWNoKGZ1bmN0aW9uIChmb3JtLCBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3JtLmZpcnN0Q2hpbGQgJiYgZm9ybS5maXJzdENoaWxkLm5vZGVOYW1lID09PSBcIkZPUk1cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3RGb3JtQ2xvbmUgPSBmb3JtLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RGcm9tICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdEZyb20uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlZW5kXCIsIGZpcnN0Rm9ybUNsb25lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGaXJzdCBmb3JtIG1vdmVkLi4uLiFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Vjb25kRm9ybUNsb25lID0gZm9ybS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZEZyb20gJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZEZyb20uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlZW5kXCIsIHNlY29uZEZvcm1DbG9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2Vjb25kIGZvcm0gbW92ZWQuLi4uIVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGZpcnN0RnJvbSAmJiBzZWNvbmRGcm9tICYmIF90aGlzLmFkZExpc3RlbmVyKGZpcnN0RnJvbSwgc2Vjb25kRnJvbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuY2hhbmdlRmlyc3RGb3JtRGlzY2xhaW1lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRpc2NsYWltZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFzc2V0XzEuc2VsZWN0b3JzLmZpcnN0Rm9ybURpc2NsYWltZXIpO1xyXG4gICAgICAgICAgICBpZiAoIWRpc2NsYWltZXIpIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNoYW5nZUZpcnN0Rm9ybURpc2NsYWltZXIoKTtcclxuICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRpc2NsYWltZXIgZm91bmQuLi4hXCIpO1xyXG4gICAgICAgICAgICAgICAgZGlzY2xhaW1lci50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBkaXNjbGFpbWVyLmluc2VydEFkamFjZW50SFRNTChcImFmdGVyYmVnaW5cIiwgXCJDbGFzc2ljIEluZHVzdHJpZXMgbmVlZHMgdGhlIGNvbnRhY3QgaW5mb3JtYXRpb24geW91IHByb3ZpZGUgdG8gdXMgdG8gY29udGFjdCB5b3UgYWJvdXQgb3VyIHByb2R1Y3RzIGFuZCBzZXJ2aWNlcy4gWW91IG1heSB1bnN1YnNjcmliZSBmcm9tIHRoZXNlIGNvbW11bmljYXRpb25zIGF0IGFueXRpbWUuIEZvciBpbmZvcm1hdGlvbiwgY2hlY2sgb3V0IG91ciA8YSBocmVmPVxcXCJcIi5jb25jYXQoYXNzZXRfMS5maXJzdEZyb21EaXNjbGFpbWVyTGluaywgXCJcXFwiID5Qcml2YWN5IFBvbGljeTwvYT4uXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIChmaXJzdEZyb20sIHNlY29uZEZyb20pIHtcclxuICAgICAgICAgICAgdmFyIG1haW5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImRpdi5tYWluXCIpO1xyXG4gICAgICAgICAgICB2YXIgZmlyc3REb3dubG9hZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b24uZmlyc3QtZG93bmxvYWRcIik7XHJcbiAgICAgICAgICAgIHZhciBzZWNvbmREb3dubG9hZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiYnV0dG9uLnNlY29uZC1kb3dubG9hZFwiKTtcclxuICAgICAgICAgICAgaWYgKCFmaXJzdERvd25sb2FkIHx8XHJcbiAgICAgICAgICAgICAgICAhc2Vjb25kRG93bmxvYWRzIHx8XHJcbiAgICAgICAgICAgICAgICBzZWNvbmREb3dubG9hZHMubGVuZ3RoID09PSAwIHx8XHJcbiAgICAgICAgICAgICAgICAhbWFpbnMgfHxcclxuICAgICAgICAgICAgICAgIG1haW5zLmxlbmd0aCA9PT0gMCB8fFxyXG4gICAgICAgICAgICAgICAgIWZpcnN0RnJvbSB8fFxyXG4gICAgICAgICAgICAgICAgIXNlY29uZEZyb20pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaXJzdERvd25sb2FkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5oaWRlT3RoZXJNYWluKG1haW5zKTtcclxuICAgICAgICAgICAgICAgIGZpcnN0RnJvbS5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNlY29uZERvd25sb2Fkcy5mb3JFYWNoKGZ1bmN0aW9uIChidG4pIHtcclxuICAgICAgICAgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmhpZGVPdGhlck1haW4obWFpbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZEZyb20uY2xhc3NMaXN0LmFkZChcInNob3dcIik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIF90aGlzLmNoYW5nZUZpcnN0Rm9ybURpc2NsYWltZXIoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaGlkZU90aGVyTWFpbiA9IGZ1bmN0aW9uIChtYWlucykge1xyXG4gICAgICAgICAgICBtYWlucy5mb3JFYWNoKGZ1bmN0aW9uIChtYWluKSB7XHJcbiAgICAgICAgICAgICAgICBtYWluLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE92ZXJsYXlDb21wb25lbnQ7XHJcbn0oKSk7XHJcbmV4cG9ydHMuT3ZlcmxheUNvbXBvbmVudCA9IE92ZXJsYXlDb21wb25lbnQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuTG9hZGVyID0gdm9pZCAwO1xyXG52YXIgTG9hZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTG9hZGVyKCkge1xyXG4gICAgICAgIHRoaXMubG9hZCA9IGZ1bmN0aW9uIChzcmNMaW5rLCBpZCwgdGFnTmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcclxuICAgICAgICAgICAgdGFnTmFtZSA9PT0gXCJzY3JpcHRcIlxyXG4gICAgICAgICAgICAgICAgPyB0YWcuc2V0QXR0cmlidXRlKFwic3JjXCIsIHNyY0xpbmspXHJcbiAgICAgICAgICAgICAgICA6IHRhZy5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIHNyY0xpbmspO1xyXG4gICAgICAgICAgICB0YWdOYW1lID09PSBcImxpbmtcIiAmJiB0YWcuc2V0QXR0cmlidXRlKFwicmVsXCIsIFwic3R5bGVzaGVldFwiKTtcclxuICAgICAgICAgICAgdGFnLnNldEF0dHJpYnV0ZShcImlkXCIsIGlkKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0YWcpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiXCIuY29uY2F0KHRhZ05hbWUsIFwiI1wiKSArIGlkKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIExvYWRlcjtcclxufSgpKTtcclxuZXhwb3J0cy5Mb2FkZXIgPSBMb2FkZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuSW5pdGlhbGl6ZXIgPSB2b2lkIDA7XHJcbnZhciBJbml0aWFsaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEluaXRpYWxpemVyKCkge1xyXG4gICAgfVxyXG4gICAgSW5pdGlhbGl6ZXIuaW5pdCA9IGZ1bmN0aW9uICh0ZXN0SW5mbywgdmVyc2lvbikge1xyXG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRlc3RJbmZvLklEKTtcclxuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIlwiLmNvbmNhdCh0ZXN0SW5mby5JRCwgXCItXCIpLmNvbmNhdCh0ZXN0SW5mby5WQVJJQVRJT04pKTtcclxuICAgICAgICBjb25zb2xlLmluZm8oXCJJRDogXCIuY29uY2F0KHRlc3RJbmZvLklELCBcIiwgVkFSSUFUSU9OOiBcIikuY29uY2F0KHRlc3RJbmZvLlZBUklBVElPTiwgXCIsIFZFUlNJT046IFwiKS5jb25jYXQodmVyc2lvbiwgXCIgaXMgcnVubmluZy4uLi4uIVwiKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEluaXRpYWxpemVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkluaXRpYWxpemVyID0gSW5pdGlhbGl6ZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuUG9sbGVyID0gdm9pZCAwO1xyXG52YXIgdXNlcl9vcHRpb25zXzEgPSByZXF1aXJlKFwiLi91c2VyLm9wdGlvbnNcIik7XHJcbnZhciBQb2xsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQb2xsZXIoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zdWNjZXNzZnVsQ29uZGl0aW9ucyA9IFtdO1xyXG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7IH07XHJcbiAgICAgICAgdGhpcy5jb25kaXRpb25zTGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLnBvbGwgPSBmdW5jdGlvbiAoY29uZGl0aW9ucywgY2FsbGJhY2ssIHVzZXJPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgICAgICAgICAgIF90aGlzLm9wdGlvbnMgPSBuZXcgdXNlcl9vcHRpb25zXzEuVXNlck9wdGlvbnMoKTtcclxuICAgICAgICAgICAgX3RoaXMuY29uZGl0aW9uc0xlbmd0aCA9IGNvbmRpdGlvbnMubGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAodXNlck9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9wdGlvbnMgPSB1c2VyT3B0aW9ucztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy50aW1lb3V0ID0gX3RoaXMub3B0aW9ucy50aW1lb3V0XHJcbiAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKF90aGlzLmdldE5vdygpICsgX3RoaXMub3B0aW9ucy50aW1lb3V0KS5nZXRUaW1lKClcclxuICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb25kaXRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5wb2xsRm9yQ29uZGl0aW9uKGNvbmRpdGlvbnNbaV0sIF90aGlzLm9wdGlvbnMud2FpdCwgdHJ1ZSwgX3RoaXMub3B0aW9ucy5tdWx0aXBsaWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5nZXROb3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaXNUaW1lT3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMudGltZW91dCAmJiBfdGhpcy5nZXROb3coKSA+IF90aGlzLnRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZXZhbHVhdGVDb25kaXRpb24gPSBmdW5jdGlvbiAoY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmICghY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25kaXRpb24gPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbmRpdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29uZGl0aW9uID09PSBcInN0cmluZ1wiICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZGl0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5pc0FsbENvbmRpdGlvblBhc3NlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvbmRpdGlvbnNMZW5ndGggPT09IF90aGlzLnN1Y2Nlc3NmdWxDb25kaXRpb25zLmxlbmd0aDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMucG9sbEZvckNvbmRpdGlvbiA9IGZ1bmN0aW9uIChjb25kaXRpb24sIHdhaXRUaW1lLCBza2lwV2FpdCwgbXVsdGlwbGllcikge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMudGltZW91dCAmJiBfdGhpcy5pc1RpbWVPdXQoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBfdGhpcy5ldmFsdWF0ZUNvbmRpdGlvbihjb25kaXRpb24pO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zdWNjZXNzZnVsQ29uZGl0aW9ucy5wdXNoKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNBbGxDb25kaXRpb25QYXNzZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNhbGxiYWNrKF90aGlzLnN1Y2Nlc3NmdWxDb25kaXRpb25zKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBvbGxGb3JDb25kaXRpb24oY29uZGl0aW9uLCB3YWl0VGltZSAqIG11bHRpcGxpZXIsIHNraXBXYWl0LCBtdWx0aXBsaWVyKTtcclxuICAgICAgICAgICAgICAgIH0sIHNraXBXYWl0ID8gMCA6IHdhaXRUaW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFBvbGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5Qb2xsZXIgPSBQb2xsZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuVXNlck9wdGlvbnMgPSB2b2lkIDA7XHJcbnZhciBVc2VyT3B0aW9ucyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFVzZXJPcHRpb25zKCkge1xyXG4gICAgICAgIHRoaXMud2FpdCA9IDUwO1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGllciA9IDEuMTtcclxuICAgICAgICB0aGlzLnRpbWVvdXQgPSAwO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFVzZXJPcHRpb25zO1xyXG59KCkpO1xyXG5leHBvcnRzLlVzZXJPcHRpb25zID0gVXNlck9wdGlvbnM7XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgcG9sbGVyXzEgPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vdXRpbGl0aWVzL3BvbGxlclwiKTtcclxudmFyIGFzc2V0XzEgPSByZXF1aXJlKFwiLi9jb21tb24vYXNzZXRcIik7XHJcbnZhciBtYWluX2NvbXBvbmVudF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9tYWluLmNvbXBvbmVudFwiKTtcclxudmFyIGllQ2hlY2tzID0gL01TSUV8VHJpZGVudHxFZGdlXFwvKDEyfDEzfDE0fDE1fDE2fDE3fDE4KS8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbmlmICghaWVDaGVja3MpIHtcclxuICAgIHZhciBtYWluID0gbmV3IG1haW5fY29tcG9uZW50XzEuTWFpbkNvbXBvbmVudCgpO1xyXG4gICAgdmFyIHBvbGxlciA9IG5ldyBwb2xsZXJfMS5Qb2xsZXIoKTtcclxuICAgIHBvbGxlci5wb2xsKFtcImJvZHlcIiwgYXNzZXRfMS5zZWxlY3RvcnMuZnJlZU9yZGVyQnRuXSwgbWFpbi5pbml0KTtcclxufVxyXG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJmaXJzdEZyb21EaXNjbGFpbWVyTGluayIsImh1YlNwb3RMaWJyYXJ5IiwiZm9ybUJnTGluayIsInNlbGVjdG9ycyIsImZyZWVPcmRlckJ0biIsImZpcnN0Rm9ybURpc2NsYWltZXIiLCJqcyIsIlRlc3RJbmZvIiwiTWFpbkNvbXBvbmVudCIsImluaXRpYWxpemVyXzEiLCJhc3NldF8xIiwidGVzdF9pbmZvXzEiLCJsb2FkZXJfMSIsIm92ZXJsYXlfY29tcG9uZW50XzEiLCJfdGhpcyIsInRoaXMiLCJvdmVybGF5Q29tcG9uZW50IiwiT3ZlcmxheUNvbXBvbmVudCIsImluaXQiLCJMb2FkZXIiLCJsb2FkIiwidGhlbiIsImpzRWxtIiwiY29uc29sZSIsImxvZyIsImNoZWNrSHViU3BvdE9iamVjdCIsImhic3B0IiwiYXBwbHlNb2RpZmljYXRpb24iLCJzZXRUaW1lb3V0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicmVuZGVyIiwib3ZlcmxheUNvbXBvbmVudEVsbSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJjbGFzc0xpc3QiLCJhZGQiLCJJbml0aWFsaXplciIsImdldEh0bWwiLCJjb25jYXQiLCJ0cmltIiwibG9hZEZpcnN0Rm9ybVNjcmlwdCIsImxvYWRTZWNvbmRGb3JtU2NyaXB0IiwiYm9keSIsImluc2VydEFkamFjZW50SFRNTCIsImZvcm1zIiwiY3JlYXRlIiwicmVnaW9uIiwicG9ydGFsSWQiLCJmb3JtSWQiLCJmaW5kRm9ybSIsImh1YlNwb3RGb3JtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmaXJzdEZyb20iLCJzZWNvbmRGcm9tIiwiY2hpbGRFbGVtZW50Q291bnQiLCJmb3JFYWNoIiwiZm9ybSIsImluZGV4IiwiZmlyc3RDaGlsZCIsIm5vZGVOYW1lIiwiZmlyc3RGb3JtQ2xvbmUiLCJjbG9uZU5vZGUiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJyZW1vdmUiLCJzZWNvbmRGb3JtQ2xvbmUiLCJhZGRMaXN0ZW5lciIsImNoYW5nZUZpcnN0Rm9ybURpc2NsYWltZXIiLCJkaXNjbGFpbWVyIiwidGV4dENvbnRlbnQiLCJtYWlucyIsImZpcnN0RG93bmxvYWQiLCJzZWNvbmREb3dubG9hZHMiLCJsZW5ndGgiLCJoaWRlT3RoZXJNYWluIiwiYnRuIiwibWFpbiIsInNyY0xpbmsiLCJpZCIsInRhZ05hbWUiLCJ0YWciLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiaGVhZCIsImFwcGVuZENoaWxkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJlbGVtZW50IiwidGVzdEluZm8iLCJ2ZXJzaW9uIiwiZG9jdW1lbnRFbGVtZW50IiwiSUQiLCJWQVJJQVRJT04iLCJpbmZvIiwiUG9sbGVyIiwidXNlcl9vcHRpb25zXzEiLCJvcHRpb25zIiwidGltZW91dCIsInN1Y2Nlc3NmdWxDb25kaXRpb25zIiwiY2FsbGJhY2siLCJjb25kaXRpb25zTGVuZ3RoIiwicG9sbCIsImNvbmRpdGlvbnMiLCJ1c2VyT3B0aW9ucyIsIlVzZXJPcHRpb25zIiwiRGF0ZSIsImdldE5vdyIsImdldFRpbWUiLCJpIiwicG9sbEZvckNvbmRpdGlvbiIsIndhaXQiLCJtdWx0aXBsaWVyIiwiaXNUaW1lT3V0IiwiZXZhbHVhdGVDb25kaXRpb24iLCJjb25kaXRpb24iLCJpc0FsbENvbmRpdGlvblBhc3NlZCIsIndhaXRUaW1lIiwic2tpcFdhaXQiLCJyZXN1bHQiLCJwdXNoIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInBvbGxlcl8xIiwibWFpbl9jb21wb25lbnRfMSIsInRlc3QiLCJ3aW5kb3ciLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiXSwic291cmNlUm9vdCI6IiJ9