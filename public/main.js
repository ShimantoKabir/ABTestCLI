(()=>{"use strict";var e={612:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mobileMaxWidth=t.pathnames=t.mBoxNames=t.pageData=t.selectors=void 0,t.selectors={shoppingPageContainer:"div#shopping-page-container",navHeader:"div.nav-header"},t.pageData={checkoutPage:{desktopPreviousSiblingClass:"base-due-today-wrapper",desktopTargetLastChildClass:"submit-bar",placeOrderButtonSelector:"div.submit-section>button"},shoppingPage:{desktopCtaSelector:"div.btn-checkout>a.btn-shop",mobileCtaSelector:"div.review-order-button>a.btn-shop",mobilePreTargetClass:"main-content",mobilePreSiblingClass:"input-component-frame",desktopTargetClass:"checkout-column",desktopSiblingClass:"checkout-column",mobilePostTargetId:"save-cart-zip-code",mobilePostAttributeName:"data-previous-value"}},t.mBoxNames={checkoutPageVisit:"checkout-page-visit",processingPageVisit:"processing-page-visit",thankYouPageVisit:"thankyou-page-visit",reviewOrderClick:"review-order-click",placeOrderSuccessClick:"place-order-success-click",placeOrderErrorClick:"place-order-error-click"},t.pathnames={checkout:"/shopping/checkout",processing:"/shopping/checkout/processing",shopping:"/shopping",thankyou:"/shopping/thankyou"},t.mobileMaxWidth=720},958:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.TestInfo=void 0,(i=t.TestInfo||(t.TestInfo={})).ID="CC007",i.SITE="consumercellular",i.TITLE="9.4D - Remove NAV on Checkout Page",i.CLIENT="brainlab",i.TARGET="https://www.consumercellular.com/shopping/choose/plan",i.VARIATION="control"},62:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MainComponent=void 0;var o=i(951),n=i(612),a=i(958),s=i(355),r=i(242);t.MainComponent=function(){var e=this;this.location="",this.trackEvent=function(e){console.log("mBoxName=",e),adobe.target.trackEvent({mbox:e})},this.addListener=function(t,i,o){var n=document.querySelector(t);n&&n.addEventListener(i,(function(){!n.getAttribute("disabled")&&e.trackEvent(o)}))},this.addPlaceOrderListener=function(t){var i=document.querySelectorAll(t);i&&0!==i.length&&i.forEach((function(t){t.addEventListener("click",(function(){!t.classList.contains("disabled")&&e.trackEvent(n.mBoxNames.placeOrderSuccessClick),t.classList.contains("disabled")&&e.trackEvent(n.mBoxNames.placeOrderErrorClick)}))}))},this.mangeHeader=function(){var e="/shopping/checkout"===window.location.pathname,t=document.querySelector(n.selectors.navHeader);if(t){var i=t.classList.contains("checkout-new-header");e&&!i?t.classList.add("checkout-new-header"):!e&&i&&t.classList.remove("checkout-new-header")}},this.setPageVisitMatrix=function(t){t===n.pathnames.checkout&&e.trackEvent(n.mBoxNames.checkoutPageVisit),t===n.pathnames.thankyou&&e.trackEvent(n.mBoxNames.thankYouPageVisit),t===n.pathnames.processing&&e.trackEvent(n.mBoxNames.processingPageVisit)},this.init=function(){s.LocationObserver.listen((function(t){e.location=t,e.setPageVisitMatrix(t)})),new r.TestObserver(n.selectors.shoppingPageContainer).observe((function(t){"1"===a.TestInfo.VARIATION.toString()&&e.mangeHeader();for(var i=0;i<t.length;i++){var o=t[i].target,s=t[i].previousSibling,r=o.lastChild,c=t[i];o&&r&&r.classList&&r.classList.contains(n.pageData.checkoutPage.desktopTargetLastChildClass)&&s&&s.classList&&s.classList.contains(n.pageData.checkoutPage.desktopPreviousSiblingClass)&&e.addPlaceOrderListener(n.pageData.checkoutPage.placeOrderButtonSelector),o&&o.classList&&o.classList.contains(n.pageData.shoppingPage.desktopTargetClass)&&s&&s.classList&&s.classList.contains(n.pageData.shoppingPage.desktopSiblingClass)&&"/shopping"===e.location&&(window.innerWidth>n.mobileMaxWidth&&e.addListener(n.pageData.shoppingPage.desktopCtaSelector,"click",n.mBoxNames.reviewOrderClick),window.innerWidth<n.mobileMaxWidth&&e.addListener(n.pageData.shoppingPage.mobileCtaSelector,"click",n.mBoxNames.reviewOrderClick)),o&&o.id&&o.id===n.pageData.shoppingPage.mobilePostTargetId&&c.attributeName&&c.attributeName===n.pageData.shoppingPage.mobilePostAttributeName&&"/shopping"===e.location&&(window.innerWidth>n.mobileMaxWidth&&e.addListener(n.pageData.shoppingPage.desktopCtaSelector,"click",n.mBoxNames.reviewOrderClick),window.innerWidth<n.mobileMaxWidth&&e.addListener(n.pageData.shoppingPage.mobileCtaSelector,"click",n.mBoxNames.reviewOrderClick))}}))},o.Initializer.init(a.TestInfo,"0.0.5")}},355:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocationObserver=void 0;var o=i(242),n=function(){function e(){}var t;return t=e,e.previousPathname="",e.listen=function(e){new o.TestObserver("body").observe((function(i){location.pathname!==t.previousPathname&&(t.previousPathname=location.pathname,e(location.pathname))}))},e}();t.LocationObserver=n},242:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TestObserver=void 0;t.TestObserver=function(e){var t=this;this.targetNode=null,this.config={},this.observe=function(e){new MutationObserver(e).observe(t.targetNode,t.config)},this.targetNode=document.querySelector(e),this.config={attributes:!0,childList:!0,subtree:!0,characterData:!0}}},951:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Initializer=void 0;var i=function(){function e(){}return e.init=function(e,t){document.documentElement.classList.add(e.ID),document.documentElement.classList.add("".concat(e.ID,"-").concat(e.VARIATION)),console.info("ID: ".concat(e.ID,", VARIATION: ").concat(e.VARIATION,", VERSION: ").concat(t," is running.....!"))},e}();t.Initializer=i},454:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Poller=void 0;var o=i(704);t.Poller=function(){var e=this;this.options=null,this.timeout=null,this.successfulConditions=[],this.callback=function(){},this.conditionsLength=0,this.poll=function(t,i,n){e.callback=i,e.options=new o.UserOptions,e.conditionsLength=t.length,n&&(e.options=n),e.timeout=e.options.timeout?new Date(e.getNow()+e.options.timeout).getTime():null;for(var a=0;a<t.length;a++)e.pollForCondition(t[a],e.options.wait,!0,e.options.multiplier)},this.getNow=function(){return(new Date).getTime()},this.isTimeOut=function(){return!!(e.timeout&&e.getNow()>e.timeout)},this.evaluateCondition=function(e){return!!e&&("function"==typeof e?e():!("string"!=typeof e||!document.querySelector(e)))},this.isAllConditionPassed=function(){return e.conditionsLength===e.successfulConditions.length},this.pollForCondition=function(t,i,o,n){if(e.timeout&&e.isTimeOut())return!1;var a=e.evaluateCondition(t);return a?(e.successfulConditions.push(a),e.isAllConditionPassed()&&e.callback(e.successfulConditions)):setTimeout((function(){e.pollForCondition(t,i*n,o,n)}),o?0:i),!0}}},704:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserOptions=void 0;t.UserOptions=function(){this.wait=50,this.multiplier=1.1,this.timeout=0}}},t={};function i(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,i),a.exports}(()=>{var e=i(454),t=i(62);if(!/MSIE|Trident|Edge\/(12|13|14|15|16|17|18)/.test(window.navigator.userAgent)){var o=new t.MainComponent;(new e.Poller).poll(["body"],o.init)}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSxFQUFXLEVBQUlELElBSVosQ0FDVCxDQUNGLEMsb0ZDckdhLEVBQUFaLFlBQWIsV0FDRSxLQUFBTSxLQUFlLEdBQ2YsS0FBQUMsV0FBcUIsSUFDckIsS0FBQWIsUUFBa0IsQ0FDcEIsQyxHQ0hJdUIsRUFBMkIsQ0FBQyxFQUdoQyxTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCRSxJQUFqQkQsRUFDSCxPQUFPQSxFQUFhRSxRQUdyQixJQUFJQyxFQUFTTixFQUF5QkUsR0FBWSxDQUdqREcsUUFBUyxDQUFDLEdBT1gsT0FIQUUsRUFBb0JMLEdBQVVJLEVBQVFBLEVBQU9ELFFBQVNKLEdBRy9DSyxFQUFPRCxPQUNmLEMsTUN0QkEsYUFDQSxRQU1BLElBSmlCLDRDQUE0Q0csS0FDM0R2RSxPQUFPd0UsVUFBVUMsV0FHSixDQUNiLElBQU1DLEVBQU8sSUFBSSxFQUFBckcsZUFDRixJQUFJLEVBQUFpRSxRQUNaSyxLQUFLLENBQUMsUUFBUytCLEVBQUtwRSxLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWItdGVzdC10cy1jbGkvLi9zcmMvY2xpZW50cy9icmFpbmxhYi9jb25zdW1lcmNlbGx1bGFyL0NDMDA3L2NvbW1vbi9hc3NldC50cyIsIndlYnBhY2s6Ly9hYi10ZXN0LXRzLWNsaS8uL3NyYy9jbGllbnRzL2JyYWlubGFiL2NvbnN1bWVyY2VsbHVsYXIvQ0MwMDcvY29tbW9uL3Rlc3QuaW5mby50cyIsIndlYnBhY2s6Ly9hYi10ZXN0LXRzLWNsaS8uL3NyYy9jbGllbnRzL2JyYWlubGFiL2NvbnN1bWVyY2VsbHVsYXIvQ0MwMDcvY29tcG9uZW50cy9tYWluLmNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly9hYi10ZXN0LXRzLWNsaS8uL3NyYy9jbGllbnRzL2JyYWlubGFiL2NvbnN1bWVyY2VsbHVsYXIvQ0MwMDcvb2JzZXJ2ZXIvbG9jYXRpb24ub2JzZXJ2ZXIudHMiLCJ3ZWJwYWNrOi8vYWItdGVzdC10cy1jbGkvLi9zcmMvY2xpZW50cy9icmFpbmxhYi9jb25zdW1lcmNlbGx1bGFyL0NDMDA3L29ic2VydmVyL3Rlc3Qub2JzZXJ2ZXIudHMiLCJ3ZWJwYWNrOi8vYWItdGVzdC10cy1jbGkvLi9zcmMvdXRpbGl0aWVzL2luaXRpYWxpemVyLnRzIiwid2VicGFjazovL2FiLXRlc3QtdHMtY2xpLy4vc3JjL3V0aWxpdGllcy9wb2xsZXIudHMiLCJ3ZWJwYWNrOi8vYWItdGVzdC10cy1jbGkvLi9zcmMvdXRpbGl0aWVzL3VzZXIub3B0aW9ucy50cyIsIndlYnBhY2s6Ly9hYi10ZXN0LXRzLWNsaS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9hYi10ZXN0LXRzLWNsaS8uL3NyYy9jbGllbnRzL2JyYWlubGFiL2NvbnN1bWVyY2VsbHVsYXIvQ0MwMDcvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcclxuICBzaG9wcGluZ1BhZ2VDb250YWluZXI6IFwiZGl2I3Nob3BwaW5nLXBhZ2UtY29udGFpbmVyXCIsXHJcbiAgbmF2SGVhZGVyOiBcImRpdi5uYXYtaGVhZGVyXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcGFnZURhdGEgPSB7XHJcbiAgY2hlY2tvdXRQYWdlOiB7XHJcbiAgICBkZXNrdG9wUHJldmlvdXNTaWJsaW5nQ2xhc3M6IFwiYmFzZS1kdWUtdG9kYXktd3JhcHBlclwiLFxyXG4gICAgZGVza3RvcFRhcmdldExhc3RDaGlsZENsYXNzOiBcInN1Ym1pdC1iYXJcIixcclxuICAgIHBsYWNlT3JkZXJCdXR0b25TZWxlY3RvcjogXCJkaXYuc3VibWl0LXNlY3Rpb24+YnV0dG9uXCIsXHJcbiAgfSxcclxuICBzaG9wcGluZ1BhZ2U6IHtcclxuICAgIGRlc2t0b3BDdGFTZWxlY3RvcjogXCJkaXYuYnRuLWNoZWNrb3V0PmEuYnRuLXNob3BcIixcclxuICAgIG1vYmlsZUN0YVNlbGVjdG9yOiBcImRpdi5yZXZpZXctb3JkZXItYnV0dG9uPmEuYnRuLXNob3BcIixcclxuICAgIG1vYmlsZVByZVRhcmdldENsYXNzOiBcIm1haW4tY29udGVudFwiLFxyXG4gICAgbW9iaWxlUHJlU2libGluZ0NsYXNzOiBcImlucHV0LWNvbXBvbmVudC1mcmFtZVwiLFxyXG4gICAgZGVza3RvcFRhcmdldENsYXNzOiBcImNoZWNrb3V0LWNvbHVtblwiLFxyXG4gICAgZGVza3RvcFNpYmxpbmdDbGFzczogXCJjaGVja291dC1jb2x1bW5cIixcclxuICAgIG1vYmlsZVBvc3RUYXJnZXRJZDogXCJzYXZlLWNhcnQtemlwLWNvZGVcIixcclxuICAgIG1vYmlsZVBvc3RBdHRyaWJ1dGVOYW1lOiBcImRhdGEtcHJldmlvdXMtdmFsdWVcIixcclxuICB9LFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IG1Cb3hOYW1lcyA9IHtcclxuICBjaGVja291dFBhZ2VWaXNpdDogXCJjaGVja291dC1wYWdlLXZpc2l0XCIsXHJcbiAgcHJvY2Vzc2luZ1BhZ2VWaXNpdDogXCJwcm9jZXNzaW5nLXBhZ2UtdmlzaXRcIixcclxuICB0aGFua1lvdVBhZ2VWaXNpdDogXCJ0aGFua3lvdS1wYWdlLXZpc2l0XCIsXHJcbiAgcmV2aWV3T3JkZXJDbGljazogXCJyZXZpZXctb3JkZXItY2xpY2tcIixcclxuICBwbGFjZU9yZGVyU3VjY2Vzc0NsaWNrOiBcInBsYWNlLW9yZGVyLXN1Y2Nlc3MtY2xpY2tcIixcclxuICBwbGFjZU9yZGVyRXJyb3JDbGljazogXCJwbGFjZS1vcmRlci1lcnJvci1jbGlja1wiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHBhdGhuYW1lcyA9IHtcclxuICBjaGVja291dDogXCIvc2hvcHBpbmcvY2hlY2tvdXRcIixcclxuICBwcm9jZXNzaW5nOiBcIi9zaG9wcGluZy9jaGVja291dC9wcm9jZXNzaW5nXCIsXHJcbiAgc2hvcHBpbmc6IFwiL3Nob3BwaW5nXCIsXHJcbiAgdGhhbmt5b3U6IFwiL3Nob3BwaW5nL3RoYW5reW91XCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgbW9iaWxlTWF4V2lkdGg6IG51bWJlciA9IDcyMDtcclxuIiwiZXhwb3J0IGVudW0gVGVzdEluZm8ge0lEID0gJ0NDMDA3JywgU0lURSA9ICdjb25zdW1lcmNlbGx1bGFyJywgVElUTEUgPSAnOS40RCAtIFJlbW92ZSBOQVYgb24gQ2hlY2tvdXQgUGFnZScsIENMSUVOVCA9ICdicmFpbmxhYicsIFRBUkdFVCA9ICdodHRwczovL3d3dy5jb25zdW1lcmNlbGx1bGFyLmNvbS9zaG9wcGluZy9jaG9vc2UvcGxhbicsIFZBUklBVElPTiA9ICdjb250cm9sJ30iLCJpbXBvcnQgeyBJbml0aWFsaXplciB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi91dGlsaXRpZXMvaW5pdGlhbGl6ZXJcIjtcclxuaW1wb3J0IHtcclxuICBtQm94TmFtZXMsXHJcbiAgbW9iaWxlTWF4V2lkdGgsXHJcbiAgcGFnZURhdGEsXHJcbiAgcGF0aG5hbWVzLFxyXG4gIHNlbGVjdG9ycyxcclxufSBmcm9tIFwiLi4vY29tbW9uL2Fzc2V0XCI7XHJcbmltcG9ydCB7IFRlc3RJbmZvIH0gZnJvbSBcIi4uL2NvbW1vbi90ZXN0LmluZm9cIjtcclxuaW1wb3J0IHsgTG9jYXRpb25PYnNlcnZlciB9IGZyb20gXCIuLi9vYnNlcnZlci9sb2NhdGlvbi5vYnNlcnZlclwiO1xyXG5pbXBvcnQgeyBUZXN0T2JzZXJ2ZXIgfSBmcm9tIFwiLi4vb2JzZXJ2ZXIvdGVzdC5vYnNlcnZlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1haW5Db21wb25lbnQge1xyXG4gIGxvY2F0aW9uOiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIEluaXRpYWxpemVyLmluaXQoVGVzdEluZm8sIFwiMC4wLjVcIik7XHJcbiAgfVxyXG5cclxuICB0cmFja0V2ZW50ID0gKG1ib3g6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc29sZS5sb2coXCJtQm94TmFtZT1cIiwgbWJveCk7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBhZG9iZS50YXJnZXQudHJhY2tFdmVudCh7XHJcbiAgICAgIG1ib3g6IG1ib3gsXHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBhZGRMaXN0ZW5lciA9IChzZWxlY3Rvcjogc3RyaW5nLCBldmVudE5hbWU6IHN0cmluZywgbUJveE5hbWU6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgY3RhOiBudWxsIHwgRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG5cclxuICAgIGlmICghY3RhKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjdGEuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsICgpID0+IHtcclxuICAgICAgIWN0YS5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSAmJiB0aGlzLnRyYWNrRXZlbnQobUJveE5hbWUpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgYWRkUGxhY2VPcmRlckxpc3RlbmVyID0gKHNlbGVjdG9yOiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnN0IHBsYWNlT3JkZXJCdXR0b25zOiBudWxsIHwgTm9kZUxpc3RPZjxIVE1MQnV0dG9uRWxlbWVudD4gPVxyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcclxuXHJcbiAgICBpZiAoIXBsYWNlT3JkZXJCdXR0b25zIHx8IHBsYWNlT3JkZXJCdXR0b25zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgcGxhY2VPcmRlckJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCkgPT4ge1xyXG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAhYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcImRpc2FibGVkXCIpICYmXHJcbiAgICAgICAgICB0aGlzLnRyYWNrRXZlbnQobUJveE5hbWVzLnBsYWNlT3JkZXJTdWNjZXNzQ2xpY2spO1xyXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNhYmxlZFwiKSAmJlxyXG4gICAgICAgICAgdGhpcy50cmFja0V2ZW50KG1Cb3hOYW1lcy5wbGFjZU9yZGVyRXJyb3JDbGljayk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgbWFuZ2VIZWFkZXIgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBpc0NoZWNrb3V0UGFnZTogYm9vbGVhbiA9XHJcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PT0gXCIvc2hvcHBpbmcvY2hlY2tvdXRcIiA/IHRydWUgOiBmYWxzZTtcclxuXHJcbiAgICBjb25zdCBuYXZIZWFkZXI6IG51bGwgfCBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHNlbGVjdG9ycy5uYXZIZWFkZXJcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCFuYXZIZWFkZXIpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGlzTmV3SGVhZGVyRGVzaWduQWRkZWQ6IGJvb2xlYW4gPSBuYXZIZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFxyXG4gICAgICBcImNoZWNrb3V0LW5ldy1oZWFkZXJcIlxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoaXNDaGVja291dFBhZ2UgJiYgIWlzTmV3SGVhZGVyRGVzaWduQWRkZWQpIHtcclxuICAgICAgbmF2SGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJjaGVja291dC1uZXctaGVhZGVyXCIpO1xyXG4gICAgfSBlbHNlIGlmICghaXNDaGVja291dFBhZ2UgJiYgaXNOZXdIZWFkZXJEZXNpZ25BZGRlZCkge1xyXG4gICAgICBuYXZIZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcImNoZWNrb3V0LW5ldy1oZWFkZXJcIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0UGFnZVZpc2l0TWF0cml4ID0gKGxvY2F0aW9uOiBzdHJpbmcpID0+IHtcclxuICAgIGxvY2F0aW9uID09PSBwYXRobmFtZXMuY2hlY2tvdXQgJiZcclxuICAgICAgdGhpcy50cmFja0V2ZW50KG1Cb3hOYW1lcy5jaGVja291dFBhZ2VWaXNpdCk7XHJcbiAgICBsb2NhdGlvbiA9PT0gcGF0aG5hbWVzLnRoYW5reW91ICYmXHJcbiAgICAgIHRoaXMudHJhY2tFdmVudChtQm94TmFtZXMudGhhbmtZb3VQYWdlVmlzaXQpO1xyXG4gICAgbG9jYXRpb24gPT09IHBhdGhuYW1lcy5wcm9jZXNzaW5nICYmXHJcbiAgICAgIHRoaXMudHJhY2tFdmVudChtQm94TmFtZXMucHJvY2Vzc2luZ1BhZ2VWaXNpdCk7XHJcbiAgfTtcclxuXHJcbiAgaW5pdCA9ICgpOiB2b2lkID0+IHtcclxuICAgIExvY2F0aW9uT2JzZXJ2ZXIubGlzdGVuKChsb2NhdGlvbjogc3RyaW5nKSA9PiB7XHJcbiAgICAgIHRoaXMubG9jYXRpb24gPSBsb2NhdGlvbjtcclxuICAgICAgdGhpcy5zZXRQYWdlVmlzaXRNYXRyaXgobG9jYXRpb24pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgdGVzdE9ic2VydmVyID0gbmV3IFRlc3RPYnNlcnZlcihzZWxlY3RvcnMuc2hvcHBpbmdQYWdlQ29udGFpbmVyKTtcclxuXHJcbiAgICBjb25zdCBjYWxsYmFjayA9IChtdXRhdGlvbkxpc3Q6IE11dGF0aW9uUmVjb3JkW10pID0+IHtcclxuICAgICAgaWYgKFRlc3RJbmZvLlZBUklBVElPTi50b1N0cmluZygpID09PSBcIjFcIikge1xyXG4gICAgICAgIHRoaXMubWFuZ2VIZWFkZXIoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG11dGF0aW9uTGlzdC5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBtdXRhdGlvbkxpc3RbaW5kZXhdLnRhcmdldCBhcyBFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IHByZXZpb3VzU2libGluZzogRWxlbWVudCA9IG11dGF0aW9uTGlzdFtpbmRleF1cclxuICAgICAgICAgIC5wcmV2aW91c1NpYmxpbmcgYXMgRWxlbWVudDtcclxuXHJcbiAgICAgICAgY29uc3QgbGFzdENoaWxkOiBFbGVtZW50ID0gdGFyZ2V0Lmxhc3RDaGlsZCBhcyBFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IG11dGF0aW9uUmVjb3JkOiBNdXRhdGlvblJlY29yZCA9IG11dGF0aW9uTGlzdFtpbmRleF07XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHRhcmdldCAmJlxyXG4gICAgICAgICAgbGFzdENoaWxkICYmXHJcbiAgICAgICAgICBsYXN0Q2hpbGQuY2xhc3NMaXN0ICYmXHJcbiAgICAgICAgICBsYXN0Q2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKFxyXG4gICAgICAgICAgICBwYWdlRGF0YS5jaGVja291dFBhZ2UuZGVza3RvcFRhcmdldExhc3RDaGlsZENsYXNzXHJcbiAgICAgICAgICApICYmXHJcbiAgICAgICAgICBwcmV2aW91c1NpYmxpbmcgJiZcclxuICAgICAgICAgIHByZXZpb3VzU2libGluZy5jbGFzc0xpc3QgJiZcclxuICAgICAgICAgIHByZXZpb3VzU2libGluZy5jbGFzc0xpc3QuY29udGFpbnMoXHJcbiAgICAgICAgICAgIHBhZ2VEYXRhLmNoZWNrb3V0UGFnZS5kZXNrdG9wUHJldmlvdXNTaWJsaW5nQ2xhc3NcclxuICAgICAgICAgIClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHRoaXMuYWRkUGxhY2VPcmRlckxpc3RlbmVyKFxyXG4gICAgICAgICAgICBwYWdlRGF0YS5jaGVja291dFBhZ2UucGxhY2VPcmRlckJ1dHRvblNlbGVjdG9yXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZGVza3RvcC1zaG9wcGluZy1wYWdlLXJldmlldy1vcmRlclxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHRhcmdldCAmJlxyXG4gICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdCAmJlxyXG4gICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhwYWdlRGF0YS5zaG9wcGluZ1BhZ2UuZGVza3RvcFRhcmdldENsYXNzKSAmJlxyXG4gICAgICAgICAgcHJldmlvdXNTaWJsaW5nICYmXHJcbiAgICAgICAgICBwcmV2aW91c1NpYmxpbmcuY2xhc3NMaXN0ICYmXHJcbiAgICAgICAgICBwcmV2aW91c1NpYmxpbmcuY2xhc3NMaXN0LmNvbnRhaW5zKFxyXG4gICAgICAgICAgICBwYWdlRGF0YS5zaG9wcGluZ1BhZ2UuZGVza3RvcFNpYmxpbmdDbGFzc1xyXG4gICAgICAgICAgKSAmJlxyXG4gICAgICAgICAgdGhpcy5sb2NhdGlvbiA9PT0gXCIvc2hvcHBpbmdcIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgd2luZG93LmlubmVyV2lkdGggPiBtb2JpbGVNYXhXaWR0aCAmJlxyXG4gICAgICAgICAgICB0aGlzLmFkZExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgIHBhZ2VEYXRhLnNob3BwaW5nUGFnZS5kZXNrdG9wQ3RhU2VsZWN0b3IsXHJcbiAgICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICAgIG1Cb3hOYW1lcy5yZXZpZXdPcmRlckNsaWNrXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgd2luZG93LmlubmVyV2lkdGggPCBtb2JpbGVNYXhXaWR0aCAmJlxyXG4gICAgICAgICAgICB0aGlzLmFkZExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgIHBhZ2VEYXRhLnNob3BwaW5nUGFnZS5tb2JpbGVDdGFTZWxlY3RvcixcclxuICAgICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgICAgbUJveE5hbWVzLnJldmlld09yZGVyQ2xpY2tcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRlc2t0b3Atc2hvcHBpbmctcGFnZS1wb3N0LXJldmlldy1vcmRlclxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHRhcmdldCAmJlxyXG4gICAgICAgICAgdGFyZ2V0LmlkICYmXHJcbiAgICAgICAgICB0YXJnZXQuaWQgPT09IHBhZ2VEYXRhLnNob3BwaW5nUGFnZS5tb2JpbGVQb3N0VGFyZ2V0SWQgJiZcclxuICAgICAgICAgIG11dGF0aW9uUmVjb3JkLmF0dHJpYnV0ZU5hbWUgJiZcclxuICAgICAgICAgIG11dGF0aW9uUmVjb3JkLmF0dHJpYnV0ZU5hbWUgPT09XHJcbiAgICAgICAgICAgIHBhZ2VEYXRhLnNob3BwaW5nUGFnZS5tb2JpbGVQb3N0QXR0cmlidXRlTmFtZSAmJlxyXG4gICAgICAgICAgdGhpcy5sb2NhdGlvbiA9PT0gXCIvc2hvcHBpbmdcIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgd2luZG93LmlubmVyV2lkdGggPiBtb2JpbGVNYXhXaWR0aCAmJlxyXG4gICAgICAgICAgICB0aGlzLmFkZExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgIHBhZ2VEYXRhLnNob3BwaW5nUGFnZS5kZXNrdG9wQ3RhU2VsZWN0b3IsXHJcbiAgICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICAgIG1Cb3hOYW1lcy5yZXZpZXdPcmRlckNsaWNrXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgd2luZG93LmlubmVyV2lkdGggPCBtb2JpbGVNYXhXaWR0aCAmJlxyXG4gICAgICAgICAgICB0aGlzLmFkZExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgIHBhZ2VEYXRhLnNob3BwaW5nUGFnZS5tb2JpbGVDdGFTZWxlY3RvcixcclxuICAgICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgICAgbUJveE5hbWVzLnJldmlld09yZGVyQ2xpY2tcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGVzdE9ic2VydmVyLm9ic2VydmUoY2FsbGJhY2spO1xyXG4gIH07XHJcbn1cclxuIiwiaW1wb3J0IHsgVGVzdE9ic2VydmVyIH0gZnJvbSBcIi4vdGVzdC5vYnNlcnZlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIExvY2F0aW9uT2JzZXJ2ZXIge1xyXG4gIHN0YXRpYyBwcmV2aW91c1BhdGhuYW1lOiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuICBzdGF0aWMgbGlzdGVuID0gKGNhbGxiYWNrOiBGdW5jdGlvbikgPT4ge1xyXG4gICAgY29uc3QgdGVzdE9ic2VydmVyID0gbmV3IFRlc3RPYnNlcnZlcihcImJvZHlcIik7XHJcblxyXG4gICAgY29uc3QgbXV0YXRpb25DYWxsYmFjayA9IChtdXRhdGlvbkxpc3Q6IE11dGF0aW9uUmVjb3JkW10pID0+IHtcclxuICAgICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lICE9PSB0aGlzLnByZXZpb3VzUGF0aG5hbWUpIHtcclxuICAgICAgICB0aGlzLnByZXZpb3VzUGF0aG5hbWUgPSBsb2NhdGlvbi5wYXRobmFtZTtcclxuICAgICAgICBjYWxsYmFjayhsb2NhdGlvbi5wYXRobmFtZSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGVzdE9ic2VydmVyLm9ic2VydmUobXV0YXRpb25DYWxsYmFjayk7XHJcbiAgfTtcclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVGVzdE9ic2VydmVyIHtcclxuICBwcml2YXRlIHRhcmdldE5vZGU6IEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIGNvbmZpZyA9IHt9O1xyXG5cclxuICBjb25zdHJ1Y3Rvcih0YXJnZXROb2RlOiBzdHJpbmcpIHtcclxuICAgIHRoaXMudGFyZ2V0Tm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0Tm9kZSk7XHJcbiAgICB0aGlzLmNvbmZpZyA9IHtcclxuICAgICAgYXR0cmlidXRlczogdHJ1ZSxcclxuICAgICAgY2hpbGRMaXN0OiB0cnVlLFxyXG4gICAgICBzdWJ0cmVlOiB0cnVlLFxyXG4gICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIG9ic2VydmUgPSAoY2FsbEJhY2s6IE11dGF0aW9uQ2FsbGJhY2spID0+IHtcclxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoY2FsbEJhY2spO1xyXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnRhcmdldE5vZGUgYXMgRWxlbWVudCwgdGhpcy5jb25maWcpO1xyXG4gIH07XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEluaXRpYWxpemVyIHtcclxuICBzdGF0aWMgaW5pdCA9IChcclxuICAgIHRlc3RJbmZvOiB7XHJcbiAgICAgIElEOiBzdHJpbmc7XHJcbiAgICAgIFNJVEU6IHN0cmluZztcclxuICAgICAgQ0xJRU5UOiBzdHJpbmc7XHJcbiAgICAgIFZBUklBVElPTjogc3RyaW5nO1xyXG4gICAgfSxcclxuICAgIHZlcnNpb246IHN0cmluZ1xyXG4gICk6IHZvaWQgPT4ge1xyXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGVzdEluZm8uSUQpO1xyXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgIGAke3Rlc3RJbmZvLklEfS0ke3Rlc3RJbmZvLlZBUklBVElPTn1gXHJcbiAgICApO1xyXG4gICAgY29uc29sZS5pbmZvKFxyXG4gICAgICBgSUQ6ICR7dGVzdEluZm8uSUR9LCBWQVJJQVRJT046ICR7dGVzdEluZm8uVkFSSUFUSU9OfSwgVkVSU0lPTjogJHt2ZXJzaW9ufSBpcyBydW5uaW5nLi4uLi4hYFxyXG4gICAgKTtcclxuICB9O1xyXG59XHJcbiIsImltcG9ydCB7IFVzZXJPcHRpb25zIH0gZnJvbSBcIi4vdXNlci5vcHRpb25zXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9sbGVyIHtcclxuICBwcml2YXRlIG9wdGlvbnM6IFVzZXJPcHRpb25zIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSB0aW1lb3V0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIHN1Y2Nlc3NmdWxDb25kaXRpb25zOiBib29sZWFuW10gPSBbXTtcclxuICBwcml2YXRlIGNhbGxiYWNrOiBGdW5jdGlvbiA9ICgpID0+IHt9O1xyXG4gIHByaXZhdGUgY29uZGl0aW9uc0xlbmd0aDogbnVtYmVyID0gMDtcclxuXHJcbiAgcG9sbCA9IChcclxuICAgIGNvbmRpdGlvbnM6IChGdW5jdGlvbiB8IHN0cmluZylbXSxcclxuICAgIGNhbGxiYWNrOiBGdW5jdGlvbixcclxuICAgIHVzZXJPcHRpb25zPzogVXNlck9wdGlvbnNcclxuICApID0+IHtcclxuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgIHRoaXMub3B0aW9ucyA9IG5ldyBVc2VyT3B0aW9ucygpO1xyXG4gICAgdGhpcy5jb25kaXRpb25zTGVuZ3RoID0gY29uZGl0aW9ucy5sZW5ndGg7XHJcblxyXG4gICAgaWYgKHVzZXJPcHRpb25zKSB7XHJcbiAgICAgIHRoaXMub3B0aW9ucyA9IHVzZXJPcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudGltZW91dCA9IHRoaXMub3B0aW9ucy50aW1lb3V0XHJcbiAgICAgID8gbmV3IERhdGUodGhpcy5nZXROb3coKSArIHRoaXMub3B0aW9ucy50aW1lb3V0KS5nZXRUaW1lKClcclxuICAgICAgOiBudWxsO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uZGl0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICB0aGlzLnBvbGxGb3JDb25kaXRpb24oXHJcbiAgICAgICAgY29uZGl0aW9uc1tpXSxcclxuICAgICAgICB0aGlzLm9wdGlvbnMud2FpdCxcclxuICAgICAgICB0cnVlLFxyXG4gICAgICAgIHRoaXMub3B0aW9ucy5tdWx0aXBsaWVyXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgZ2V0Tm93ID0gKCk6IG51bWJlciA9PiB7XHJcbiAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgfTtcclxuXHJcbiAgaXNUaW1lT3V0ID0gKCk6IGJvb2xlYW4gPT4ge1xyXG4gICAgaWYgKHRoaXMudGltZW91dCAmJiB0aGlzLmdldE5vdygpID4gdGhpcy50aW1lb3V0KSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH07XHJcblxyXG4gIGV2YWx1YXRlQ29uZGl0aW9uID0gKGNvbmRpdGlvbjogRnVuY3Rpb24gfCBzdHJpbmcpOiBib29sZWFuID0+IHtcclxuICAgIGlmICghY29uZGl0aW9uKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIGNvbmRpdGlvbiA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgIHJldHVybiBjb25kaXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIGNvbmRpdGlvbiA9PT0gXCJzdHJpbmdcIiAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbmRpdGlvbikpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH07XHJcblxyXG4gIGlzQWxsQ29uZGl0aW9uUGFzc2VkID0gKCk6IGJvb2xlYW4gPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuY29uZGl0aW9uc0xlbmd0aCA9PT0gdGhpcy5zdWNjZXNzZnVsQ29uZGl0aW9ucy5sZW5ndGg7XHJcbiAgfTtcclxuXHJcbiAgcG9sbEZvckNvbmRpdGlvbiA9IChcclxuICAgIGNvbmRpdGlvbjogRnVuY3Rpb24gfCBzdHJpbmcsXHJcbiAgICB3YWl0VGltZTogbnVtYmVyLFxyXG4gICAgc2tpcFdhaXQ6IGJvb2xlYW4sXHJcbiAgICBtdWx0aXBsaWVyOiBudW1iZXJcclxuICApOiBib29sZWFuID0+IHtcclxuICAgIGlmICh0aGlzLnRpbWVvdXQgJiYgdGhpcy5pc1RpbWVPdXQoKSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5ldmFsdWF0ZUNvbmRpdGlvbihjb25kaXRpb24pO1xyXG5cclxuICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgdGhpcy5zdWNjZXNzZnVsQ29uZGl0aW9ucy5wdXNoKHJlc3VsdCk7XHJcblxyXG4gICAgICBpZiAodGhpcy5pc0FsbENvbmRpdGlvblBhc3NlZCgpKSB7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLnN1Y2Nlc3NmdWxDb25kaXRpb25zKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2V0VGltZW91dChcclxuICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBvbGxGb3JDb25kaXRpb24oXHJcbiAgICAgICAgICAgIGNvbmRpdGlvbixcclxuICAgICAgICAgICAgd2FpdFRpbWUgKiBtdWx0aXBsaWVyLFxyXG4gICAgICAgICAgICBza2lwV2FpdCxcclxuICAgICAgICAgICAgbXVsdGlwbGllclxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNraXBXYWl0ID8gMCA6IHdhaXRUaW1lXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfTtcclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVXNlck9wdGlvbnMge1xyXG4gIHdhaXQ6IG51bWJlciA9IDUwO1xyXG4gIG11bHRpcGxpZXI6IG51bWJlciA9IDEuMTtcclxuICB0aW1lb3V0OiBudW1iZXIgPSAwO1xyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJpbXBvcnQgeyBQb2xsZXIgfSBmcm9tIFwiLi4vLi4vLi4vLi4vdXRpbGl0aWVzL3BvbGxlclwiO1xyXG5pbXBvcnQgeyBNYWluQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9tYWluLmNvbXBvbmVudFwiO1xyXG5cclxuY29uc3QgaWVDaGVja3MgPSAvTVNJRXxUcmlkZW50fEVkZ2VcXC8oMTJ8MTN8MTR8MTV8MTZ8MTd8MTgpLy50ZXN0KFxyXG4gIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50XHJcbik7XHJcblxyXG5pZiAoIWllQ2hlY2tzKSB7XHJcbiAgY29uc3QgbWFpbiA9IG5ldyBNYWluQ29tcG9uZW50KCk7XHJcbiAgY29uc3QgcG9sbGVyID0gbmV3IFBvbGxlcigpO1xyXG4gIHBvbGxlci5wb2xsKFtcImJvZHlcIl0sIG1haW4uaW5pdCk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInNlbGVjdG9ycyIsInNob3BwaW5nUGFnZUNvbnRhaW5lciIsIm5hdkhlYWRlciIsInBhZ2VEYXRhIiwiY2hlY2tvdXRQYWdlIiwiZGVza3RvcFByZXZpb3VzU2libGluZ0NsYXNzIiwiZGVza3RvcFRhcmdldExhc3RDaGlsZENsYXNzIiwicGxhY2VPcmRlckJ1dHRvblNlbGVjdG9yIiwic2hvcHBpbmdQYWdlIiwiZGVza3RvcEN0YVNlbGVjdG9yIiwibW9iaWxlQ3RhU2VsZWN0b3IiLCJtb2JpbGVQcmVUYXJnZXRDbGFzcyIsIm1vYmlsZVByZVNpYmxpbmdDbGFzcyIsImRlc2t0b3BUYXJnZXRDbGFzcyIsImRlc2t0b3BTaWJsaW5nQ2xhc3MiLCJtb2JpbGVQb3N0VGFyZ2V0SWQiLCJtb2JpbGVQb3N0QXR0cmlidXRlTmFtZSIsIm1Cb3hOYW1lcyIsImNoZWNrb3V0UGFnZVZpc2l0IiwicHJvY2Vzc2luZ1BhZ2VWaXNpdCIsInRoYW5rWW91UGFnZVZpc2l0IiwicmV2aWV3T3JkZXJDbGljayIsInBsYWNlT3JkZXJTdWNjZXNzQ2xpY2siLCJwbGFjZU9yZGVyRXJyb3JDbGljayIsInBhdGhuYW1lcyIsImNoZWNrb3V0IiwicHJvY2Vzc2luZyIsInNob3BwaW5nIiwidGhhbmt5b3UiLCJtb2JpbGVNYXhXaWR0aCIsIlRlc3RJbmZvIiwiTWFpbkNvbXBvbmVudCIsImxvY2F0aW9uIiwidHJhY2tFdmVudCIsIm1ib3giLCJjb25zb2xlIiwibG9nIiwiYWRvYmUiLCJ0YXJnZXQiLCJhZGRMaXN0ZW5lciIsInNlbGVjdG9yIiwiZXZlbnROYW1lIiwibUJveE5hbWUiLCJjdGEiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZ2V0QXR0cmlidXRlIiwiYWRkUGxhY2VPcmRlckxpc3RlbmVyIiwicGxhY2VPcmRlckJ1dHRvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGVuZ3RoIiwiZm9yRWFjaCIsImJ1dHRvbiIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwibWFuZ2VIZWFkZXIiLCJpc0NoZWNrb3V0UGFnZSIsIndpbmRvdyIsInBhdGhuYW1lIiwiaXNOZXdIZWFkZXJEZXNpZ25BZGRlZCIsImFkZCIsInJlbW92ZSIsInNldFBhZ2VWaXNpdE1hdHJpeCIsImluaXQiLCJMb2NhdGlvbk9ic2VydmVyIiwibGlzdGVuIiwiVGVzdE9ic2VydmVyIiwib2JzZXJ2ZSIsIm11dGF0aW9uTGlzdCIsIlZBUklBVElPTiIsInRvU3RyaW5nIiwiaW5kZXgiLCJwcmV2aW91c1NpYmxpbmciLCJsYXN0Q2hpbGQiLCJtdXRhdGlvblJlY29yZCIsImlubmVyV2lkdGgiLCJpZCIsImF0dHJpYnV0ZU5hbWUiLCJJbml0aWFsaXplciIsInByZXZpb3VzUGF0aG5hbWUiLCJjYWxsYmFjayIsInRhcmdldE5vZGUiLCJjb25maWciLCJjYWxsQmFjayIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJ0aGlzIiwiYXR0cmlidXRlcyIsImNoaWxkTGlzdCIsInN1YnRyZWUiLCJjaGFyYWN0ZXJEYXRhIiwidGVzdEluZm8iLCJ2ZXJzaW9uIiwiZG9jdW1lbnRFbGVtZW50IiwiSUQiLCJpbmZvIiwiUG9sbGVyIiwib3B0aW9ucyIsInRpbWVvdXQiLCJzdWNjZXNzZnVsQ29uZGl0aW9ucyIsImNvbmRpdGlvbnNMZW5ndGgiLCJwb2xsIiwiY29uZGl0aW9ucyIsInVzZXJPcHRpb25zIiwiVXNlck9wdGlvbnMiLCJEYXRlIiwiZ2V0Tm93IiwiZ2V0VGltZSIsImkiLCJwb2xsRm9yQ29uZGl0aW9uIiwid2FpdCIsIm11bHRpcGxpZXIiLCJpc1RpbWVPdXQiLCJldmFsdWF0ZUNvbmRpdGlvbiIsImNvbmRpdGlvbiIsImlzQWxsQ29uZGl0aW9uUGFzc2VkIiwid2FpdFRpbWUiLCJza2lwV2FpdCIsInJlc3VsdCIsInB1c2giLCJzZXRUaW1lb3V0IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwibWFpbiJdLCJzb3VyY2VSb290IjoiIn0=