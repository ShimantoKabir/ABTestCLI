(()=>{"use strict";var e={106:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pageData=t.mboxNames=t.selectors=void 0,t.selectors={shoppingPageContainer:"div#shopping-page-container",tiles:"div.placeholder-device-tile",addDeviceDirect:"div.add-device-tile a",yourDeviceDirect:"ul.mobile-menu-list>li:nth-child(6)>a",shopPhone:"shop-phone",yourPhone:"your-phone",tileFooter:"div.placeholder-device-tile>div.tile-body>div.tile-footer",tileFooterLink:"div.placeholder-device-tile>div.tile-body>div.tile-footer>a"},t.mboxNames={shopPhone:"mbox-shop-phone",yourPhone:"mbox-your-phone"},t.pageData={shoppingPage:{planSummaryTargetClassList:["plan-summary-component","col-md-6"],planSummarySiblingClassList:["base-plan-summary-component"],mobilePostTargetId:"save-cart-zip-code",mobilePostAttributeName:"data-previous-value"}}},480:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.TestInfo=void 0,(o=t.TestInfo||(t.TestInfo={})).ID="CC008",o.SITE="consumercellular",o.TITLE="8.2 Quick Add “Bring Your Own” on Cart",o.CLIENT="brainlab",o.TARGET="https://www.consumercellular.com/shopping",o.VARIATION="control"},986:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MainComponent=void 0;var n=o(951),i=o(106),s=o(480),r=o(972),a=o(341);t.MainComponent=function(){var e=this;this.addControlGoalListener=function(e){var t=document.querySelectorAll(e);t&&0!==t.length&&t.forEach((function(e){e.addEventListener("click",(function(){console.log("shop-phone-and-device=",i.mboxNames.shopPhone),adobe.target.trackEvent({mbox:i.mboxNames.shopPhone})}))}))},this.addControlGoal=function(){e.addControlGoalListener(i.selectors.tileFooterLink)},this.addNewTile=function(){"1"===s.TestInfo.VARIATION.toString()?(new a.TileComponent).render():e.addControlGoal()},this.init=function(){new r.TestObserver(i.selectors.shoppingPageContainer).observe((function(t){for(var o=0;o<t.length;o++){var n=t[o],s=n.target;if(n.previousSibling,s&&s.classList&&s.classList.contains(i.pageData.shoppingPage.planSummaryTargetClassList[0])&&s.classList.contains(i.pageData.shoppingPage.planSummaryTargetClassList[1])){e.addNewTile();break}if(s&&s.id&&s.id===i.pageData.shoppingPage.mobilePostTargetId&&n.attributeName&&n.attributeName===i.pageData.shoppingPage.mobilePostAttributeName){e.addNewTile();break}}}))},n.Initializer.init(s.TestInfo,"0.0.1")}},341:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TileComponent=void 0;var n=o(106);t.TileComponent=function(){var e=this;this.getHtml=function(){return'\n      <div class="tile-component">\n        <div class="'.concat(n.selectors.shopPhone,' phone">\n          <div class="phone-img">\n            <img src="https://medianet.com/cro/consumercellular/cc008/v1/shop-phone.png">\n          </div>\n          <div class="phone-text">\n            <p>SHOP PHONES & DEVICES</p>\n          </div>\n        </div>\n        <div class="').concat(n.selectors.yourPhone,' phone">\n          <div class="phone-img">\n            <img src="https://medianet.com/cro/consumercellular/cc008/v1/own-phone.png">\n            <p>FREE</p>\n          </div>\n          <div class="phone-text">\n            <p>BRING YOUR OWN</p>\n          </div>\n        </div>\n      </div>\n    ').trim()},this.render=function(){var t=document.querySelectorAll(n.selectors.tiles),o=document.querySelector(n.selectors.addDeviceDirect),i=document.querySelector(n.selectors.yourDeviceDirect);if(t&&0!==t.length&&o&&i){t.forEach((function(t){t.insertAdjacentHTML("beforeend",e.getHtml())}));var s=document.querySelectorAll("div."+n.selectors.shopPhone);s&&s.length>0&&s.forEach((function(e){e.addEventListener("click",(function(){console.log("shop-phone-and-device=",n.mboxNames.shopPhone),adobe.target.trackEvent({mbox:n.mboxNames.shopPhone}),o.click()}))}));var r=document.querySelectorAll("div."+n.selectors.yourPhone);r&&r.length>0&&r.forEach((function(e){e.addEventListener("click",(function(){console.log("bring-your-device=",n.mboxNames.shopPhone),adobe.target.trackEvent({mbox:n.mboxNames.yourPhone}),i.click()}))}))}}}},972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TestObserver=void 0;t.TestObserver=function(e){var t=this;this.targetNode=null,this.config={},this.observe=function(e){var o=new MutationObserver(e);return o.observe(t.targetNode,t.config),o},this.targetNode=document.querySelector(e),this.config={attributes:!0,childList:!0,subtree:!0,characterData:!0}}},951:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Initializer=void 0;var o=function(){function e(){}return e.init=function(e,t){document.documentElement.classList.add(e.ID),document.documentElement.classList.add("".concat(e.ID,"-").concat(e.VARIATION)),console.info("ID: ".concat(e.ID,", VARIATION: ").concat(e.VARIATION,", VERSION: ").concat(t," is running.....!"))},e}();t.Initializer=o},454:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Poller=void 0;var n=o(704);t.Poller=function(){var e=this;this.options=null,this.timeout=null,this.successfulConditions=[],this.callback=function(){},this.conditionsLength=0,this.poll=function(t,o,i){e.callback=o,e.options=new n.UserOptions,e.conditionsLength=t.length,i&&(e.options=i),e.timeout=e.options.timeout?new Date(e.getNow()+e.options.timeout).getTime():null;for(var s=0;s<t.length;s++)e.pollForCondition(t[s],e.options.wait,!0,e.options.multiplier)},this.getNow=function(){return(new Date).getTime()},this.isTimeOut=function(){return!!(e.timeout&&e.getNow()>e.timeout)},this.evaluateCondition=function(e){return!!e&&("function"==typeof e?e():!("string"!=typeof e||!document.querySelector(e)))},this.isAllConditionPassed=function(){return e.conditionsLength===e.successfulConditions.length},this.pollForCondition=function(t,o,n,i){if(e.timeout&&e.isTimeOut())return!1;var s=e.evaluateCondition(t);return s?(e.successfulConditions.push(s),e.isAllConditionPassed()&&e.callback(e.successfulConditions)):setTimeout((function(){e.pollForCondition(t,o*i,n,i)}),n?0:o),!0}}},704:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserOptions=void 0;t.UserOptions=function(){this.wait=50,this.multiplier=1.1,this.timeout=0}}},t={};function o(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,o),s.exports}(()=>{var e=o(454),t=o(986);if(!/MSIE|Trident|Edge\/(12|13|14|15|16|17|18)/.test(window.navigator.userAgent)){var n=new t.MainComponent;(new e.Poller).poll(["body"],n.init)}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxPQXBCSUksR0FDRixFQUFLbkIscUJBQXFCb0IsS0FBS0QsR0FFM0IsRUFBS0gsd0JBQ1AsRUFBS2YsU0FBUyxFQUFLRCx1QkFHckJxQixZQUNFLFdBQ0UsRUFBS1gsaUJBQ0hLLEVBQ0FFLEVBQVdMLEVBQ1hNLEVBQ0FOLEVBRUosR0FDQU0sRUFBVyxFQUFJRCxJQUlaLENBQ1QsQ0FDRixDLG9GQ3JHYSxFQUFBWCxZQUFiLFdBQ0UsS0FBQUssS0FBZSxHQUNmLEtBQUFDLFdBQXFCLElBQ3JCLEtBQUFiLFFBQWtCLENBQ3BCLEMsR0NISXVCLEVBQTJCLENBQUMsRUFHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsQ0FBQyxHQU9YLE9BSEFFLEVBQW9CTCxHQUFVSSxFQUFRQSxFQUFPRCxRQUFTSixHQUcvQ0ssRUFBT0QsT0FDZixDLE1DdEJBLGFBQ0EsU0FNQSxJQUppQiw0Q0FBNENHLEtBQzNEQyxPQUFPQyxVQUFVQyxXQUdKLENBQ2IsSUFBTUMsRUFBTyxJQUFJLEVBQUFoRyxlQUNGLElBQUksRUFBQTJELFFBQ1pNLEtBQUssQ0FBQyxRQUFTK0IsRUFBSzFFLEsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hYi10ZXN0LXRzLWNsaS8uL3NyYy9jbGllbnRzL2JyYWlubGFiL2NvbnN1bWVyY2VsbHVsYXIvQ0MwMDgvY29tbW9uL2Fzc2V0LnRzIiwid2VicGFjazovL2FiLXRlc3QtdHMtY2xpLy4vc3JjL2NsaWVudHMvYnJhaW5sYWIvY29uc3VtZXJjZWxsdWxhci9DQzAwOC9jb21tb24vdGVzdC5pbmZvLnRzIiwid2VicGFjazovL2FiLXRlc3QtdHMtY2xpLy4vc3JjL2NsaWVudHMvYnJhaW5sYWIvY29uc3VtZXJjZWxsdWxhci9DQzAwOC9jb21wb25lbnRzL21haW4uY29tcG9uZW50LnRzIiwid2VicGFjazovL2FiLXRlc3QtdHMtY2xpLy4vc3JjL2NsaWVudHMvYnJhaW5sYWIvY29uc3VtZXJjZWxsdWxhci9DQzAwOC9jb21wb25lbnRzL3RpbGUuY29tcG9uZW50LnRzIiwid2VicGFjazovL2FiLXRlc3QtdHMtY2xpLy4vc3JjL2NsaWVudHMvYnJhaW5sYWIvY29uc3VtZXJjZWxsdWxhci9DQzAwOC9vYnNlcnZlci90ZXN0Lm9ic2VydmVyLnRzIiwid2VicGFjazovL2FiLXRlc3QtdHMtY2xpLy4vc3JjL3V0aWxpdGllcy9pbml0aWFsaXplci50cyIsIndlYnBhY2s6Ly9hYi10ZXN0LXRzLWNsaS8uL3NyYy91dGlsaXRpZXMvcG9sbGVyLnRzIiwid2VicGFjazovL2FiLXRlc3QtdHMtY2xpLy4vc3JjL3V0aWxpdGllcy91c2VyLm9wdGlvbnMudHMiLCJ3ZWJwYWNrOi8vYWItdGVzdC10cy1jbGkvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYWItdGVzdC10cy1jbGkvLi9zcmMvY2xpZW50cy9icmFpbmxhYi9jb25zdW1lcmNlbGx1bGFyL0NDMDA4L2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XHJcbiAgc2hvcHBpbmdQYWdlQ29udGFpbmVyOiBcImRpdiNzaG9wcGluZy1wYWdlLWNvbnRhaW5lclwiLFxyXG4gIHRpbGVzOiBcImRpdi5wbGFjZWhvbGRlci1kZXZpY2UtdGlsZVwiLFxyXG4gIGFkZERldmljZURpcmVjdDogXCJkaXYuYWRkLWRldmljZS10aWxlIGFcIixcclxuICB5b3VyRGV2aWNlRGlyZWN0OiBcInVsLm1vYmlsZS1tZW51LWxpc3Q+bGk6bnRoLWNoaWxkKDYpPmFcIixcclxuICBzaG9wUGhvbmU6IFwic2hvcC1waG9uZVwiLFxyXG4gIHlvdXJQaG9uZTogXCJ5b3VyLXBob25lXCIsXHJcbiAgdGlsZUZvb3RlcjogXCJkaXYucGxhY2Vob2xkZXItZGV2aWNlLXRpbGU+ZGl2LnRpbGUtYm9keT5kaXYudGlsZS1mb290ZXJcIixcclxuICB0aWxlRm9vdGVyTGluazogXCJkaXYucGxhY2Vob2xkZXItZGV2aWNlLXRpbGU+ZGl2LnRpbGUtYm9keT5kaXYudGlsZS1mb290ZXI+YVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IG1ib3hOYW1lcyA9IHtcclxuICBzaG9wUGhvbmU6IFwibWJveC1zaG9wLXBob25lXCIsXHJcbiAgeW91clBob25lOiBcIm1ib3gteW91ci1waG9uZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHBhZ2VEYXRhID0ge1xyXG4gIHNob3BwaW5nUGFnZToge1xyXG4gICAgcGxhblN1bW1hcnlUYXJnZXRDbGFzc0xpc3Q6IFtcInBsYW4tc3VtbWFyeS1jb21wb25lbnRcIiwgXCJjb2wtbWQtNlwiXSxcclxuICAgIHBsYW5TdW1tYXJ5U2libGluZ0NsYXNzTGlzdDogW1wiYmFzZS1wbGFuLXN1bW1hcnktY29tcG9uZW50XCJdLFxyXG4gICAgbW9iaWxlUG9zdFRhcmdldElkOiBcInNhdmUtY2FydC16aXAtY29kZVwiLFxyXG4gICAgbW9iaWxlUG9zdEF0dHJpYnV0ZU5hbWU6IFwiZGF0YS1wcmV2aW91cy12YWx1ZVwiLFxyXG4gIH0sXHJcbn07XHJcbiIsImV4cG9ydCBlbnVtIFRlc3RJbmZvIHtJRCA9ICdDQzAwOCcsIFNJVEUgPSAnY29uc3VtZXJjZWxsdWxhcicsIFRJVExFID0gJzguMiBRdWljayBBZGQg4oCcQnJpbmcgWW91ciBPd27igJ0gb24gQ2FydCcsIENMSUVOVCA9ICdicmFpbmxhYicsIFRBUkdFVCA9ICdodHRwczovL3d3dy5jb25zdW1lcmNlbGx1bGFyLmNvbS9zaG9wcGluZycsIFZBUklBVElPTiA9ICdjb250cm9sJ30iLCJpbXBvcnQgeyBJbml0aWFsaXplciB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi91dGlsaXRpZXMvaW5pdGlhbGl6ZXJcIjtcclxuaW1wb3J0IHsgbWJveE5hbWVzLCBwYWdlRGF0YSwgc2VsZWN0b3JzIH0gZnJvbSBcIi4uL2NvbW1vbi9hc3NldFwiO1xyXG5pbXBvcnQgeyBUZXN0SW5mbyB9IGZyb20gXCIuLi9jb21tb24vdGVzdC5pbmZvXCI7XHJcbmltcG9ydCB7IFRlc3RPYnNlcnZlciB9IGZyb20gXCIuLi9vYnNlcnZlci90ZXN0Lm9ic2VydmVyXCI7XHJcbmltcG9ydCB7IFRpbGVDb21wb25lbnQgfSBmcm9tIFwiLi90aWxlLmNvbXBvbmVudFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1haW5Db21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgSW5pdGlhbGl6ZXIuaW5pdChUZXN0SW5mbywgXCIwLjAuMVwiKTtcclxuICB9XHJcblxyXG4gIGFkZENvbnRyb2xHb2FsTGlzdGVuZXIgPSAoc2VsZWN0b3I6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgZWxlbWVudHM6IG51bGwgfCBOb2RlTGlzdE9mPEVsZW1lbnQ+ID1cclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XHJcblxyXG4gICAgaWYgKCFlbGVtZW50cyB8fCBlbGVtZW50cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQ6IEVsZW1lbnQpID0+IHtcclxuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwic2hvcC1waG9uZS1hbmQtZGV2aWNlPVwiLCBtYm94TmFtZXMuc2hvcFBob25lKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgYWRvYmUudGFyZ2V0LnRyYWNrRXZlbnQoeyBtYm94OiBtYm94TmFtZXMuc2hvcFBob25lIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGFkZENvbnRyb2xHb2FsID0gKCkgPT4ge1xyXG4gICAgLy8gdGhpcy5hZGRDb250cm9sR29hbExpc3RlbmVyKHNlbGVjdG9ycy50aWxlRm9vdGVyKTtcclxuICAgIHRoaXMuYWRkQ29udHJvbEdvYWxMaXN0ZW5lcihzZWxlY3RvcnMudGlsZUZvb3RlckxpbmspO1xyXG4gIH07XHJcblxyXG4gIGFkZE5ld1RpbGUgPSAoKSA9PiB7XHJcbiAgICBpZiAoVGVzdEluZm8uVkFSSUFUSU9OLnRvU3RyaW5nKCkgPT09IFwiMVwiKSB7XHJcbiAgICAgIGNvbnN0IHRpbGUgPSBuZXcgVGlsZUNvbXBvbmVudCgpO1xyXG4gICAgICB0aWxlLnJlbmRlcigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5hZGRDb250cm9sR29hbCgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGluaXQgPSAoKTogdm9pZCA9PiB7XHJcbiAgICBjb25zdCB0ZXN0T2JzZXJ2ZXIgPSBuZXcgVGVzdE9ic2VydmVyKHNlbGVjdG9ycy5zaG9wcGluZ1BhZ2VDb250YWluZXIpO1xyXG5cclxuICAgIGNvbnN0IGNhbGxiYWNrID0gKG11dGF0aW9uTGlzdDogTXV0YXRpb25SZWNvcmRbXSkgPT4ge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG11dGF0aW9uTGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IG11dGF0aW9uUmVjb3JkOiBNdXRhdGlvblJlY29yZCA9IG11dGF0aW9uTGlzdFtpXTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKFwibXV0YXRpb25SZWNvcmQ9XCIsIG11dGF0aW9uUmVjb3JkKTtcclxuXHJcbiAgICAgICAgY29uc3QgdGFyZ2V0OiBFbGVtZW50ID0gbXV0YXRpb25SZWNvcmQudGFyZ2V0IGFzIEVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgcGVydmlvdXNTaWJsaW5nOiBFbGVtZW50ID1cclxuICAgICAgICAgIG11dGF0aW9uUmVjb3JkLnByZXZpb3VzU2libGluZyBhcyBFbGVtZW50O1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0YXJnZXQgJiZcclxuICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QgJiZcclxuICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXHJcbiAgICAgICAgICAgIHBhZ2VEYXRhLnNob3BwaW5nUGFnZS5wbGFuU3VtbWFyeVRhcmdldENsYXNzTGlzdFswXVxyXG4gICAgICAgICAgKSAmJlxyXG4gICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcclxuICAgICAgICAgICAgcGFnZURhdGEuc2hvcHBpbmdQYWdlLnBsYW5TdW1tYXJ5VGFyZ2V0Q2xhc3NMaXN0WzFdXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLmFkZE5ld1RpbGUoKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdGFyZ2V0ICYmXHJcbiAgICAgICAgICB0YXJnZXQuaWQgJiZcclxuICAgICAgICAgIHRhcmdldC5pZCA9PT0gcGFnZURhdGEuc2hvcHBpbmdQYWdlLm1vYmlsZVBvc3RUYXJnZXRJZCAmJlxyXG4gICAgICAgICAgbXV0YXRpb25SZWNvcmQuYXR0cmlidXRlTmFtZSAmJlxyXG4gICAgICAgICAgbXV0YXRpb25SZWNvcmQuYXR0cmlidXRlTmFtZSA9PT1cclxuICAgICAgICAgICAgcGFnZURhdGEuc2hvcHBpbmdQYWdlLm1vYmlsZVBvc3RBdHRyaWJ1dGVOYW1lXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLmFkZE5ld1RpbGUoKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0ZXN0T2JzZXJ2ZXIub2JzZXJ2ZShjYWxsYmFjayk7XHJcbiAgfTtcclxufVxyXG4iLCJpbXBvcnQgeyBtYm94TmFtZXMsIHNlbGVjdG9ycyB9IGZyb20gXCIuLi9jb21tb24vYXNzZXRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUaWxlQ29tcG9uZW50IHtcclxuICBnZXRIdG1sID0gKCk6IHN0cmluZyA9PiB7XHJcbiAgICBjb25zdCBodG1sU3RyaW5nOiBzdHJpbmcgPSBgXHJcbiAgICAgIDxkaXYgY2xhc3M9XCJ0aWxlLWNvbXBvbmVudFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCIke3NlbGVjdG9ycy5zaG9wUGhvbmV9IHBob25lXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicGhvbmUtaW1nXCI+XHJcbiAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9tZWRpYW5ldC5jb20vY3JvL2NvbnN1bWVyY2VsbHVsYXIvY2MwMDgvdjEvc2hvcC1waG9uZS5wbmdcIj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInBob25lLXRleHRcIj5cclxuICAgICAgICAgICAgPHA+U0hPUCBQSE9ORVMgJiBERVZJQ0VTPC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cIiR7c2VsZWN0b3JzLnlvdXJQaG9uZX0gcGhvbmVcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJwaG9uZS1pbWdcIj5cclxuICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL21lZGlhbmV0LmNvbS9jcm8vY29uc3VtZXJjZWxsdWxhci9jYzAwOC92MS9vd24tcGhvbmUucG5nXCI+XHJcbiAgICAgICAgICAgIDxwPkZSRUU8L3A+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJwaG9uZS10ZXh0XCI+XHJcbiAgICAgICAgICAgIDxwPkJSSU5HIFlPVVIgT1dOPC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuXHJcbiAgICByZXR1cm4gaHRtbFN0cmluZy50cmltKCk7XHJcbiAgfTtcclxuXHJcbiAgcmVuZGVyID0gKCkgPT4ge1xyXG4gICAgY29uc3QgdGlsZXM6IG51bGwgfCBOb2RlTGlzdE9mPEhUTUxEaXZFbGVtZW50PiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICAgIHNlbGVjdG9ycy50aWxlc1xyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBhZGREZXZpY2VEaXJlY3Q6IG51bGwgfCBIVE1MQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHNlbGVjdG9ycy5hZGREZXZpY2VEaXJlY3RcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgeW91ckRldmljZURpcmVjdDogbnVsbCB8IEhUTUxBbmNob3JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgc2VsZWN0b3JzLnlvdXJEZXZpY2VEaXJlY3RcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCF0aWxlcyB8fCB0aWxlcy5sZW5ndGggPT09IDAgfHwgIWFkZERldmljZURpcmVjdCB8fCAheW91ckRldmljZURpcmVjdCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGlsZXMuZm9yRWFjaCgodGlsZTogSFRNTERpdkVsZW1lbnQpID0+IHtcclxuICAgICAgdGlsZS5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgdGhpcy5nZXRIdG1sKCkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3Qgc2hvcFBob25lczogbnVsbCB8IE5vZGVMaXN0T2Y8SFRNTERpdkVsZW1lbnQ+ID1cclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImRpdi5cIiArIHNlbGVjdG9ycy5zaG9wUGhvbmUpO1xyXG5cclxuICAgIGlmIChzaG9wUGhvbmVzICYmIHNob3BQaG9uZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBzaG9wUGhvbmVzLmZvckVhY2goKHBob25lOiBIVE1MRGl2RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIHBob25lLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInNob3AtcGhvbmUtYW5kLWRldmljZT1cIiwgbWJveE5hbWVzLnNob3BQaG9uZSk7XHJcbiAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICBhZG9iZS50YXJnZXQudHJhY2tFdmVudCh7IG1ib3g6IG1ib3hOYW1lcy5zaG9wUGhvbmUgfSk7XHJcbiAgICAgICAgICBhZGREZXZpY2VEaXJlY3QuY2xpY2soKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeW91clBob25lczogbnVsbCB8IE5vZGVMaXN0T2Y8SFRNTERpdkVsZW1lbnQ+ID1cclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImRpdi5cIiArIHNlbGVjdG9ycy55b3VyUGhvbmUpO1xyXG5cclxuICAgIGlmICh5b3VyUGhvbmVzICYmIHlvdXJQaG9uZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICB5b3VyUGhvbmVzLmZvckVhY2goKHBob25lOiBIVE1MRGl2RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIHBob25lLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImJyaW5nLXlvdXItZGV2aWNlPVwiLCBtYm94TmFtZXMuc2hvcFBob25lKTtcclxuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgIGFkb2JlLnRhcmdldC50cmFja0V2ZW50KHsgbWJveDogbWJveE5hbWVzLnlvdXJQaG9uZSB9KTtcclxuICAgICAgICAgIHlvdXJEZXZpY2VEaXJlY3QuY2xpY2soKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVGVzdE9ic2VydmVyIHtcclxuICBwcml2YXRlIHRhcmdldE5vZGU6IEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIGNvbmZpZyA9IHt9O1xyXG5cclxuICBjb25zdHJ1Y3Rvcih0YXJnZXROb2RlOiBzdHJpbmcpIHtcclxuICAgIHRoaXMudGFyZ2V0Tm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0Tm9kZSk7XHJcbiAgICB0aGlzLmNvbmZpZyA9IHtcclxuICAgICAgYXR0cmlidXRlczogdHJ1ZSxcclxuICAgICAgY2hpbGRMaXN0OiB0cnVlLFxyXG4gICAgICBzdWJ0cmVlOiB0cnVlLFxyXG4gICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIG9ic2VydmUgPSAoY2FsbEJhY2s6IE11dGF0aW9uQ2FsbGJhY2spOiBNdXRhdGlvbk9ic2VydmVyID0+IHtcclxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoY2FsbEJhY2spO1xyXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnRhcmdldE5vZGUgYXMgRWxlbWVudCwgdGhpcy5jb25maWcpO1xyXG4gICAgcmV0dXJuIG9ic2VydmVyO1xyXG4gIH07XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEluaXRpYWxpemVyIHtcclxuICBzdGF0aWMgaW5pdCA9IChcclxuICAgIHRlc3RJbmZvOiB7XHJcbiAgICAgIElEOiBzdHJpbmc7XHJcbiAgICAgIFNJVEU6IHN0cmluZztcclxuICAgICAgQ0xJRU5UOiBzdHJpbmc7XHJcbiAgICAgIFZBUklBVElPTjogc3RyaW5nO1xyXG4gICAgfSxcclxuICAgIHZlcnNpb246IHN0cmluZ1xyXG4gICk6IHZvaWQgPT4ge1xyXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGVzdEluZm8uSUQpO1xyXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgIGAke3Rlc3RJbmZvLklEfS0ke3Rlc3RJbmZvLlZBUklBVElPTn1gXHJcbiAgICApO1xyXG4gICAgY29uc29sZS5pbmZvKFxyXG4gICAgICBgSUQ6ICR7dGVzdEluZm8uSUR9LCBWQVJJQVRJT046ICR7dGVzdEluZm8uVkFSSUFUSU9OfSwgVkVSU0lPTjogJHt2ZXJzaW9ufSBpcyBydW5uaW5nLi4uLi4hYFxyXG4gICAgKTtcclxuICB9O1xyXG59XHJcbiIsImltcG9ydCB7IFVzZXJPcHRpb25zIH0gZnJvbSBcIi4vdXNlci5vcHRpb25zXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9sbGVyIHtcclxuICBwcml2YXRlIG9wdGlvbnM6IFVzZXJPcHRpb25zIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSB0aW1lb3V0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIHN1Y2Nlc3NmdWxDb25kaXRpb25zOiBib29sZWFuW10gPSBbXTtcclxuICBwcml2YXRlIGNhbGxiYWNrOiBGdW5jdGlvbiA9ICgpID0+IHt9O1xyXG4gIHByaXZhdGUgY29uZGl0aW9uc0xlbmd0aDogbnVtYmVyID0gMDtcclxuXHJcbiAgcG9sbCA9IChcclxuICAgIGNvbmRpdGlvbnM6IChGdW5jdGlvbiB8IHN0cmluZylbXSxcclxuICAgIGNhbGxiYWNrOiBGdW5jdGlvbixcclxuICAgIHVzZXJPcHRpb25zPzogVXNlck9wdGlvbnNcclxuICApID0+IHtcclxuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgIHRoaXMub3B0aW9ucyA9IG5ldyBVc2VyT3B0aW9ucygpO1xyXG4gICAgdGhpcy5jb25kaXRpb25zTGVuZ3RoID0gY29uZGl0aW9ucy5sZW5ndGg7XHJcblxyXG4gICAgaWYgKHVzZXJPcHRpb25zKSB7XHJcbiAgICAgIHRoaXMub3B0aW9ucyA9IHVzZXJPcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudGltZW91dCA9IHRoaXMub3B0aW9ucy50aW1lb3V0XHJcbiAgICAgID8gbmV3IERhdGUodGhpcy5nZXROb3coKSArIHRoaXMub3B0aW9ucy50aW1lb3V0KS5nZXRUaW1lKClcclxuICAgICAgOiBudWxsO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uZGl0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICB0aGlzLnBvbGxGb3JDb25kaXRpb24oXHJcbiAgICAgICAgY29uZGl0aW9uc1tpXSxcclxuICAgICAgICB0aGlzLm9wdGlvbnMud2FpdCxcclxuICAgICAgICB0cnVlLFxyXG4gICAgICAgIHRoaXMub3B0aW9ucy5tdWx0aXBsaWVyXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgZ2V0Tm93ID0gKCk6IG51bWJlciA9PiB7XHJcbiAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgfTtcclxuXHJcbiAgaXNUaW1lT3V0ID0gKCk6IGJvb2xlYW4gPT4ge1xyXG4gICAgaWYgKHRoaXMudGltZW91dCAmJiB0aGlzLmdldE5vdygpID4gdGhpcy50aW1lb3V0KSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH07XHJcblxyXG4gIGV2YWx1YXRlQ29uZGl0aW9uID0gKGNvbmRpdGlvbjogRnVuY3Rpb24gfCBzdHJpbmcpOiBib29sZWFuID0+IHtcclxuICAgIGlmICghY29uZGl0aW9uKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIGNvbmRpdGlvbiA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgIHJldHVybiBjb25kaXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIGNvbmRpdGlvbiA9PT0gXCJzdHJpbmdcIiAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbmRpdGlvbikpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH07XHJcblxyXG4gIGlzQWxsQ29uZGl0aW9uUGFzc2VkID0gKCk6IGJvb2xlYW4gPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuY29uZGl0aW9uc0xlbmd0aCA9PT0gdGhpcy5zdWNjZXNzZnVsQ29uZGl0aW9ucy5sZW5ndGg7XHJcbiAgfTtcclxuXHJcbiAgcG9sbEZvckNvbmRpdGlvbiA9IChcclxuICAgIGNvbmRpdGlvbjogRnVuY3Rpb24gfCBzdHJpbmcsXHJcbiAgICB3YWl0VGltZTogbnVtYmVyLFxyXG4gICAgc2tpcFdhaXQ6IGJvb2xlYW4sXHJcbiAgICBtdWx0aXBsaWVyOiBudW1iZXJcclxuICApOiBib29sZWFuID0+IHtcclxuICAgIGlmICh0aGlzLnRpbWVvdXQgJiYgdGhpcy5pc1RpbWVPdXQoKSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5ldmFsdWF0ZUNvbmRpdGlvbihjb25kaXRpb24pO1xyXG5cclxuICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgdGhpcy5zdWNjZXNzZnVsQ29uZGl0aW9ucy5wdXNoKHJlc3VsdCk7XHJcblxyXG4gICAgICBpZiAodGhpcy5pc0FsbENvbmRpdGlvblBhc3NlZCgpKSB7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLnN1Y2Nlc3NmdWxDb25kaXRpb25zKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2V0VGltZW91dChcclxuICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBvbGxGb3JDb25kaXRpb24oXHJcbiAgICAgICAgICAgIGNvbmRpdGlvbixcclxuICAgICAgICAgICAgd2FpdFRpbWUgKiBtdWx0aXBsaWVyLFxyXG4gICAgICAgICAgICBza2lwV2FpdCxcclxuICAgICAgICAgICAgbXVsdGlwbGllclxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNraXBXYWl0ID8gMCA6IHdhaXRUaW1lXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfTtcclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVXNlck9wdGlvbnMge1xyXG4gIHdhaXQ6IG51bWJlciA9IDUwO1xyXG4gIG11bHRpcGxpZXI6IG51bWJlciA9IDEuMTtcclxuICB0aW1lb3V0OiBudW1iZXIgPSAwO1xyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJpbXBvcnQgeyBQb2xsZXIgfSBmcm9tIFwiLi4vLi4vLi4vLi4vdXRpbGl0aWVzL3BvbGxlclwiO1xyXG5pbXBvcnQgeyBNYWluQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9tYWluLmNvbXBvbmVudFwiO1xyXG5cclxuY29uc3QgaWVDaGVja3MgPSAvTVNJRXxUcmlkZW50fEVkZ2VcXC8oMTJ8MTN8MTR8MTV8MTZ8MTd8MTgpLy50ZXN0KFxyXG4gIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50XHJcbik7XHJcblxyXG5pZiAoIWllQ2hlY2tzKSB7XHJcbiAgY29uc3QgbWFpbiA9IG5ldyBNYWluQ29tcG9uZW50KCk7XHJcbiAgY29uc3QgcG9sbGVyID0gbmV3IFBvbGxlcigpO1xyXG4gIHBvbGxlci5wb2xsKFtcImJvZHlcIl0sIG1haW4uaW5pdCk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInNlbGVjdG9ycyIsInNob3BwaW5nUGFnZUNvbnRhaW5lciIsInRpbGVzIiwiYWRkRGV2aWNlRGlyZWN0IiwieW91ckRldmljZURpcmVjdCIsInNob3BQaG9uZSIsInlvdXJQaG9uZSIsInRpbGVGb290ZXIiLCJ0aWxlRm9vdGVyTGluayIsIm1ib3hOYW1lcyIsInBhZ2VEYXRhIiwic2hvcHBpbmdQYWdlIiwicGxhblN1bW1hcnlUYXJnZXRDbGFzc0xpc3QiLCJwbGFuU3VtbWFyeVNpYmxpbmdDbGFzc0xpc3QiLCJtb2JpbGVQb3N0VGFyZ2V0SWQiLCJtb2JpbGVQb3N0QXR0cmlidXRlTmFtZSIsIlRlc3RJbmZvIiwiTWFpbkNvbXBvbmVudCIsImFkZENvbnRyb2xHb2FsTGlzdGVuZXIiLCJzZWxlY3RvciIsImVsZW1lbnRzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGVuZ3RoIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiY29uc29sZSIsImxvZyIsImFkb2JlIiwidGFyZ2V0IiwidHJhY2tFdmVudCIsIm1ib3giLCJhZGRDb250cm9sR29hbCIsImFkZE5ld1RpbGUiLCJWQVJJQVRJT04iLCJ0b1N0cmluZyIsIlRpbGVDb21wb25lbnQiLCJyZW5kZXIiLCJpbml0IiwiVGVzdE9ic2VydmVyIiwib2JzZXJ2ZSIsIm11dGF0aW9uTGlzdCIsImkiLCJtdXRhdGlvblJlY29yZCIsInByZXZpb3VzU2libGluZyIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiaWQiLCJhdHRyaWJ1dGVOYW1lIiwiSW5pdGlhbGl6ZXIiLCJnZXRIdG1sIiwidHJpbSIsInF1ZXJ5U2VsZWN0b3IiLCJ0aWxlIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwic2hvcFBob25lcyIsInBob25lIiwiY2xpY2siLCJ5b3VyUGhvbmVzIiwidGFyZ2V0Tm9kZSIsImNvbmZpZyIsImNhbGxCYWNrIiwib2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwidGhpcyIsImF0dHJpYnV0ZXMiLCJjaGlsZExpc3QiLCJzdWJ0cmVlIiwiY2hhcmFjdGVyRGF0YSIsInRlc3RJbmZvIiwidmVyc2lvbiIsImRvY3VtZW50RWxlbWVudCIsImFkZCIsIklEIiwiaW5mbyIsIlBvbGxlciIsIm9wdGlvbnMiLCJ0aW1lb3V0Iiwic3VjY2Vzc2Z1bENvbmRpdGlvbnMiLCJjYWxsYmFjayIsImNvbmRpdGlvbnNMZW5ndGgiLCJwb2xsIiwiY29uZGl0aW9ucyIsInVzZXJPcHRpb25zIiwiVXNlck9wdGlvbnMiLCJEYXRlIiwiZ2V0Tm93IiwiZ2V0VGltZSIsInBvbGxGb3JDb25kaXRpb24iLCJ3YWl0IiwibXVsdGlwbGllciIsImlzVGltZU91dCIsImV2YWx1YXRlQ29uZGl0aW9uIiwiY29uZGl0aW9uIiwiaXNBbGxDb25kaXRpb25QYXNzZWQiLCJ3YWl0VGltZSIsInNraXBXYWl0IiwicmVzdWx0IiwicHVzaCIsInNldFRpbWVvdXQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInRlc3QiLCJ3aW5kb3ciLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJtYWluIl0sInNvdXJjZVJvb3QiOiIifQ==